import{A as ie,B as jc,C as $c,D as xn,E as Kc,F as Qc,G as Wc,H as se,I as Hc,J as Wt,K as Yc,L as Xc,M as Jc,N as Zc,O as tu,P as Pn,Q as eu,R as nu,S as ru,T as iu,U as su,V as oe,W as ou,X as au,_ as cu,ba as ae,ca as uu,f as Nc,fa as lu,h as Oc,ia as Vr,ka as hu,n as Fc,o as Lc,oa as du,p as qc,pa as kr,q as bt,t as Bc,u as Uc,v as zc,w as Rr,x as re,y as Dr,z as Gc}from"./chunk-INDH5X4G.js";import{A as os,Ab as Ie,B as vc,Bb as Mt,Cb as us,Db as Cn,Eb as Te,Fa as bc,Fb as Ee,Ga as Ac,Gb as ls,Hb as at,Ib as xr,J as wc,Jb as hs,Lb as Z,Mb as Pr,N as as,Nb as $e,Ob as Ke,Ua as $,V as cs,Va as J,W as Er,Xb as Sn,Y as Ic,Yb as ds,_ as Tc,a as ss,ab as gt,ac as Vc,b as _c,ba as Kt,bb as br,ca as X,d as T,da as Dt,db as Cc,e as L,ea as te,eb as Sc,ec as kc,f as j,fa as ee,fc as Mc,ga as ye,gc as _t,h as v,ha as ve,hb as xc,ia as je,k as Tr,ka as Vt,la as kt,lb as Ar,mb as Cr,na as we,nb as dt,ob as ne,pb as Pc,qb as Sr,ra as Ec,rb as Rc,sb as Dc,tb as D,ub as N,v as En,va as Y,vb as wt,w as yc,wa as bn,wb as An,yb as It,zb as Qt}from"./chunk-S4RGZ3N6.js";var Jd=["*",[["mat-toolbar-row"]]],Zd=["*","mat-toolbar-row"],tm=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=te({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let e=t;return e})(),Mr=(()=>{let t=class t{constructor(r,i,s){this._elementRef=r,this._platform=i,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};t.\u0275fac=function(i){return new(i||t)(J(je),J(Oc),J(Vc))},t.\u0275cmp=X({type:t,selectors:[["mat-toolbar"]],contentQueries:function(i,s,o){if(i&1&&us(o,tm,5),i&2){let a;Te(a=Ee())&&(s._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,s){i&2&&(Pc(s.color?"mat-"+s.color:""),ne("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",s._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Z],ngContentSelectors:Zd,decls:2,vars:0,template:function(i,s){i&1&&(Ie(Jd),Mt(0),Mt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let e=t;return e})();var Nr=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Dt({type:t}),t.\u0275inj=kt({imports:[bt,bt]});let e=t;return e})();function em(e,t){e&1&&(D(0,"div")(1,"button",1)(2,"span"),at(3,"Login"),N()(),D(4,"button",2)(5,"span"),at(6,"Join Us"),N()()())}function nm(e,t){if(e&1){let n=An();D(0,"div")(1,"button",3),It("click",function(){ye(n);let i=Qt();return ve(i.logout())}),D(2,"span"),at(3,"Logout"),N()()()}}var pu=(()=>{var t;let n=class n{constructor(i,s,o){L(this,t,void 0);this.responsive=i,this.minWidth728=!1,this.maxWidth728=!0,this.condition=gt(!0),j(this,t,Y(ae)),this.mobileQuery=s.matchMedia("(max-width: 960px)"),this._mobileQueryListener=()=>o.detectChanges(),this.mobileQuery.addEventListener("change",this._mobileQueryListener)}ngOnInit(){this.setBreakpointObserver()}setBreakpointObserver(){let i="(min-width: 728px)",s="(max-width: 728px)";this.responsive.observe([i,s]).subscribe(o=>{let a=o.breakpoints;this.minWidth728=a[i],this.maxWidth728=a[s],this.condition.update(c=>c=!this.minWidth728&&this.maxWidth728)})}logout(){T(this,t).logout()}get isAuthenticated(){return T(this,t).isAuthenticated}};t=new WeakMap,n.\u0275fac=function(s){return new(s||n)(J(Lc),J(Fc),J(br))},n.\u0275cmp=X({type:n,selectors:[["app-toolbar"]],standalone:!0,features:[Z],decls:6,vars:1,consts:[[1,"spacer"],["mat-flat-button","","routerLink","/login"],["mat-stroked-button","","routerLink","/register"],["mat-flat-button","",3,"click"]],template:function(s,o){s&1&&(D(0,"mat-toolbar")(1,"h1"),at(2,"SOCIAL THOUGHTS"),N(),wt(3,"span",0),Ar(4,em,7,0,"div")(5,nm,4,0),N()),s&2&&($(4),Sr(4,o.isAuthenticated?5:4))},dependencies:[_t,Nr,Mr,ie,Dr,re,Nc],styles:["[_nghost-%COMP%]{position:fixed;width:100%;top:0;z-index:1;background-color:#fafafa}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:8vh}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{color:#444;font-size:3vmin;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;letter-spacing:.1rem}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;gap:1vmin;align-items:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:.1rem;color:#444;font-size:2vmin;font-weight:lighter}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(1)   span[_ngcontent-%COMP%]{text-decoration:underline}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(2){border:1px solid #A212D5}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-of-type(2)   span[_ngcontent-%COMP%]{color:#a212d5}@media (min-width: 728px){[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:12vh}}",".spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-fab[_ngcontent-%COMP%]{background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5)}.mat-mdc-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-unelevated-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: #fff;--mdc-radio-disabled-unselected-icon-color: #fff;--mdc-radio-unselected-hover-icon-color: #fff;--mdc-radio-unselected-icon-color: #fff;--mdc-radio-unselected-pressed-icon-color: #fff;--mdc-radio-selected-hover-icon-color: #fff;--mdc-radio-selected-focus-icon-color: #fff;--mdc-radio-selected-icon-color: #fff;--mdc-radio-selected-pressed-icon-color: #fff;--mat-radio-ripple-color: #fff;--mat-radio-checked-ripple-color: #fff;--mat-radio-disabled-label-color: #fff}"],changeDetection:0});let e=n;return e})();var gu=(()=>{let t=class t{constructor(){this._listeners=[]}notify(r,i){for(let s of this._listeners)s(r,i)}listen(r){return this._listeners.push(r),()=>{this._listeners=this._listeners.filter(i=>r!==i)}}ngOnDestroy(){this._listeners=[]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var im=["input"],sm=["formField"],om=["*"],am=0,ms=class{constructor(t,n){this.source=t,this.value=n}};var cm=new we("MatRadioGroup"),um=new we("mat-radio-default-options",{providedIn:"root",factory:lm});function lm(){return{color:"accent"}}var hm=(()=>{let t=class t{get checked(){return this._checked}set checked(r){this._checked!==r&&(this._checked=r,r&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!r&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),r&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===r),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(r){this._labelPosition=r}get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(r){this._setDisabled(r)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(r){this._required=r}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(r){this._color=r}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(r,i,s,o,a,c,u,l){this._elementRef=i,this._changeDetector=s,this._focusMonitor=o,this._radioDispatcher=a,this._providerOverride=u,this._uniqueId=`mat-radio-${++am}`,this.id=this._uniqueId,this.disableRipple=!1,this.tabIndex=0,this.change=new Tc,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=r,this._noopAnimations=c==="NoopAnimations",l&&(this.tabIndex=ds(l,0))}focus(r,i){i?this._focusMonitor.focusVia(this._inputElement,i,r):this._inputElement.nativeElement.focus(r)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((r,i)=>{r!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(r=>{!r&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ms(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(r){r.stopPropagation()}_onInputInteraction(r){if(r.stopPropagation(),!this.checked&&!this.disabled){let i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(r){this._onInputInteraction(r),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(r){this._disabled!==r&&(this._disabled=r,this._changeDetector.markForCheck())}_updateTabIndex(){let r=this.radioGroup,i;if(!r||!r.selected||this.disabled?i=this.tabIndex:i=r.selected===this?this.tabIndex:-1,i!==this._previousTabIndex){let s=this._inputElement?.nativeElement;s&&(s.setAttribute("tabindex",i+""),this._previousTabIndex=i)}}};t.\u0275fac=function(i){return new(i||t)(J(cm,8),J(je),J(br),J(qc),J(gu),J(Ec,8),J(um,8),bc("tabindex"))},t.\u0275cmp=X({type:t,selectors:[["mat-radio-button"]],viewQuery:function(i,s){if(i&1&&(Cn(im,5),Cn(sm,7,je)),i&2){let o;Te(o=Ee())&&(s._inputElement=o.first),Te(o=Ee())&&(s._rippleTrigger=o.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(i,s){i&1&&It("focus",function(){return s._inputElement.nativeElement.focus()}),i&2&&(Cr("id",s.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),ne("mat-primary",s.color==="primary")("mat-accent",s.color==="accent")("mat-warn",s.color==="warn")("mat-mdc-radio-checked",s.checked)("_mat-animation-noopable",s._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[Kt.None,"aria-label","ariaLabel"],ariaLabelledby:[Kt.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[Kt.None,"aria-describedby","ariaDescribedby"],disableRipple:[Kt.HasDecoratorInputTransform,"disableRipple","disableRipple",Sn],tabIndex:[Kt.HasDecoratorInputTransform,"tabIndex","tabIndex",r=>r==null?0:ds(r)],checked:[Kt.HasDecoratorInputTransform,"checked","checked",Sn],value:"value",labelPosition:"labelPosition",disabled:[Kt.HasDecoratorInputTransform,"disabled","disabled",Sn],required:[Kt.HasDecoratorInputTransform,"required","required",Sn],color:"color"},outputs:{change:"change"},exportAs:["matRadioButton"],standalone:!0,features:[xc,Z],ngContentSelectors:om,decls:13,vars:16,consts:[["mat-internal-form-field","",3,"labelPosition"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,s){i&1&&(Ie(),D(0,"div",0,1)(2,"div",2)(3,"div",3),It("click",function(a){return s._onTouchTargetClick(a)}),N(),D(4,"input",4,5),It("change",function(a){return s._onInputInteraction(a)}),N(),D(6,"div",6),wt(7,"div",7)(8,"div",8),N(),D(9,"div",9),wt(10,"div",10),N()(),D(11,"label",11),Mt(12),N()()),i&2&&(dt("labelPosition",s.labelPosition),$(2),ne("mdc-radio--disabled",s.disabled),$(2),dt("id",s.inputId)("checked",s.checked)("disabled",s.disabled)("required",s.required),Cr("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby),$(5),dt("matRippleTrigger",s._rippleTrigger.nativeElement)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0),$(2),dt("for",s.inputId))},dependencies:[Bc,zc],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);right:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);left:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0});let e=t;return e})(),_u=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Dt({type:t}),t.\u0275inj=kt({imports:[bt,_t,Uc,hm,bt]});let e=t;return e})();var Or=(()=>{var t;let n=class n{constructor(){L(this,t,gt(!1))}get seletor(){return T(this,t).asReadonly()}setSeletor(i){T(this,t).update(s=>s=i)}};t=new WeakMap,n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Qe=(()=>{var t;let n=class n{constructor(){L(this,t,void 0);this.userInputFormControl=new Vr(null),j(this,t,gt(null))}get userInput$(){return this.userInputFormControl.valueChanges.pipe(Ic(i=>{T(this,t).update(s=>s=i)}),cs(null),wc(400),as())}get userInputSignal(){return T(this,t).asReadonly()}get userInputValue(){return this.userInputFormControl.value}set userInput(i){this.userInputFormControl=i}};t=new WeakMap,n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Vt({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var yu=(()=>{var t,n,r;let i=class i{constructor(){L(this,t,void 0);L(this,n,void 0);L(this,r,void 0);this.userInput=new Vr(null),this.selectedRadio=1,j(this,t,Y(Or)),j(this,n,Y(Qe)),this.authService=Y(ae).isAuthenticatedSignal,j(this,r,gt(!1))}ngOnInit(){T(this,n).userInput=this.userInput}select(o){let a=this.options.find(c=>c.id===o);T(this,t).setSeletor(a?.option)}get showOptions(){return T(this,r)}get options(){return[{id:1,option:!1,name:"SEARCH"},{id:2,option:!0,name:"ADD"}]}};t=new WeakMap,n=new WeakMap,r=new WeakMap,i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=X({type:i,selectors:[["app-search-bar"]],standalone:!0,features:[Z],decls:2,vars:1,consts:[["type","text","placeholder","type @someusername or just plain text to filter by thougts","rows","2",3,"formControl"]],template:function(a,c){a&1&&(D(0,"mat-toolbar"),wt(1,"textarea",0),N()),a&2&&($(),dt("formControl",c.userInput))},dependencies:[_t,Nr,Mr,ie,re,_u,du,uu,lu,kr,hu],styles:["[_nghost-%COMP%]{position:fixed;width:100%;top:8vh;z-index:1}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:12vh;position:relative;background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5);padding:0 3vmin}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #DB0A84;border-radius:4px;outline:none;padding:4px 16px;height:10vh;resize:none;color:#333;font-style:italic;letter-spacing:.05rem}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{padding-left:16px}[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;letter-spacing:.1rem;font-weight:lighter;font-size:2vmin}@media (min-width: 728px){[_nghost-%COMP%]{top:12vh}}@media (max-width: 728px){[_nghost-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{padding:0 6vmin}}",".spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-fab[_ngcontent-%COMP%]{background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5)}.mat-mdc-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-unelevated-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: #fff;--mdc-radio-disabled-unselected-icon-color: #fff;--mdc-radio-unselected-hover-icon-color: #fff;--mdc-radio-unselected-icon-color: #fff;--mdc-radio-unselected-pressed-icon-color: #fff;--mdc-radio-selected-hover-icon-color: #fff;--mdc-radio-selected-focus-icon-color: #fff;--mdc-radio-selected-icon-color: #fff;--mdc-radio-selected-pressed-icon-color: #fff;--mat-radio-ripple-color: #fff;--mat-radio-checked-ripple-color: #fff;--mat-radio-disabled-label-color: #fff}"],changeDetection:0});let e=i;return e})();var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},St={},g,Ns=Ns||{},b=dm||self;function Yr(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Gn(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function mm(e){return Object.prototype.hasOwnProperty.call(e,fs)&&e[fs]||(e[fs]=++fm)}var fs="closure_uid_"+(1e9*Math.random()>>>0),fm=0;function pm(e,t,n){return e.call.apply(e.bind,arguments)}function gm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function ct(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ct=pm:ct=gm,ct.apply(null,arguments)}function Fr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function nt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function ce(){this.s=this.s,this.o=this.o}var _m=0;ce.prototype.s=!1;ce.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),_m!=0)&&mm(this)};ce.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Du=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Os(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function vu(e,t){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Yr(r)){let i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function ut(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var ym=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let n=()=>{};b.addEventListener("test",n,t),b.removeEventListener("test",n,t)}catch{}return e}();function Nn(e){return/^[\s\xa0]*$/.test(e)}function Xr(){var e=b.navigator;return e&&(e=e.userAgent)?e:""}function Nt(e){return Xr().indexOf(e)!=-1}function Fs(e){return Fs[" "](e),e}Fs[" "]=function(){};function vm(e,t){var n=cf;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var wm=Nt("Opera"),Xe=Nt("Trident")||Nt("MSIE"),Vu=Nt("Edge"),vs=Vu||Xe,ku=Nt("Gecko")&&!(Xr().toLowerCase().indexOf("webkit")!=-1&&!Nt("Edge"))&&!(Nt("Trident")||Nt("MSIE"))&&!Nt("Edge"),Im=Xr().toLowerCase().indexOf("webkit")!=-1&&!Nt("Edge");function Mu(){var e=b.document;return e?e.documentMode:void 0}var ws;t:{if(Lr="",qr=function(){var e=Xr();if(ku)return/rv:([^\);]+)(\)|;)/.exec(e);if(Vu)return/Edge\/([\d\.]+)/.exec(e);if(Xe)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Im)return/WebKit\/(\S+)/.exec(e);if(wm)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),qr&&(Lr=qr?qr[1]:""),Xe&&(Br=Mu(),Br!=null&&Br>parseFloat(Lr))){ws=String(Br);break t}ws=Lr}var Lr,qr,Br,Is;b.document&&Xe?(ps=Mu(),Is=ps||parseInt(ws,10)||void 0):Is=void 0;var ps,Tm=Is;function On(e,t){if(ut.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ku){t:{try{Fs(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Em[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&On.$.h.call(this)}}nt(On,ut);var Em={2:"touch",3:"pen",4:"mouse"};On.prototype.h=function(){On.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jn="closure_listenable_"+(1e6*Math.random()|0),bm=0;function Am(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++bm,this.fa=this.ia=!1}function Jr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ls(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function Cm(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function Nu(e){let t={};for(let n in e)t[n]=e[n];return t}var wu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ou(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<wu.length;s++)n=wu[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zr(e){this.src=e,this.g={},this.h=0}Zr.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=Es(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new Am(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function Ts(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=Du(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Jr(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Es(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var qs="closure_lm_"+(1e6*Math.random()|0),gs={};function Fu(e,t,n,r,i){if(r&&r.once)return qu(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Fu(e,t[s],n,r,i);return null}return n=zs(n),e&&e[jn]?e.O(t,n,Gn(r)?!!r.capture:!!r,i):Lu(e,t,n,!1,r,i)}function Lu(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Gn(i)?!!i.capture:!!i,a=Us(e);if(a||(e[qs]=a=new Zr(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=Sm(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ym||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Uu(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Sm(){function e(n){return t.call(e.src,e.listener,n)}let t=xm;return e}function qu(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)qu(e,t[s],n,r,i);return null}return n=zs(n),e&&e[jn]?e.P(t,n,Gn(r)?!!r.capture:!!r,i):Lu(e,t,n,!0,r,i)}function Bu(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Bu(e,t[s],n,r,i);else r=Gn(r)?!!r.capture:!!r,n=zs(n),e&&e[jn]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=Es(s,n,r,i),-1<n&&(Jr(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Us(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Es(t,n,r,i)),(n=-1<e?t[e]:null)&&Bs(n))}function Bs(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[jn])Ts(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Uu(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Us(t))?(Ts(n,e),n.h==0&&(n.src=null,t[qs]=null)):Jr(e)}}}function Uu(e){return e in gs?gs[e]:gs[e]="on"+e}function xm(e,t){if(e.fa)e=!0;else{t=new On(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Bs(e),e=n.call(r,t)}return e}function Us(e){return e=e[qs],e instanceof Zr?e:null}var _s="__closure_events_fn_"+(1e9*Math.random()>>>0);function zs(e){return typeof e=="function"?e:(e[_s]||(e[_s]=function(t){return e.handleEvent(t)}),e[_s])}function et(){ce.call(this),this.i=new Zr(this),this.S=this,this.J=null}nt(et,ce);et.prototype[jn]=!0;et.prototype.removeEventListener=function(e,t,n,r){Bu(this,e,t,n,r)};function ot(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new ut(t,e);else if(t instanceof ut)t.target=t.target||e;else{var i=t;t=new ut(r,e),Ou(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ur(o,r,!0,t)&&i}if(o=t.g=e,i=Ur(o,r,!0,t)&&i,i=Ur(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Ur(o,r,!1,t)&&i}et.prototype.N=function(){if(et.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Jr(n[r]);delete e.g[t],e.h--}}this.J=null};et.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};et.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Ur(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ts(e.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Gs=b.JSON.stringify,bs=class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function Pm(){var e=js;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var As=class{constructor(){this.h=this.g=null}add(t,n){let r=zu.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}},zu=new bs(()=>new Cs,e=>e.reset()),Cs=class{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Rm(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Dm(e){b.setTimeout(()=>{throw e},0)}var Fn,Ln=!1,js=new As,Gu=()=>{let e=b.Promise.resolve(void 0);Fn=()=>{e.then(Vm)}},Vm=()=>{for(var e;e=Pm();){try{e.h.call(e.g)}catch(n){Dm(n)}var t=zu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ln=!1};function ti(e,t){et.call(this),this.h=e||1,this.g=t||b,this.j=ct(this.qb,this),this.l=Date.now()}nt(ti,et);g=ti.prototype;g.ga=!1;g.T=null;g.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ot(this,"tick"),this.ga&&($s(this),this.start()))}};g.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $s(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}g.N=function(){ti.$.N.call(this),$s(this),delete this.g};function Ks(e,t,n){if(typeof e=="function")n&&(e=ct(e,n));else if(e&&typeof e.handleEvent=="function")e=ct(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:b.setTimeout(e,t||0)}function ju(e){e.g=Ks(()=>{e.g=null,e.i&&(e.i=!1,ju(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var Ss=class extends ce{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function qn(e){ce.call(this),this.h=e,this.g={}}nt(qn,ce);var Iu=[];function $u(e,t,n,r){Array.isArray(n)||(n&&(Iu[0]=n.toString()),n=Iu);for(var i=0;i<n.length;i++){var s=Fu(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ku(e){Ls(e.g,function(t,n){this.g.hasOwnProperty(n)&&Bs(t)},e),e.g={}}qn.prototype.N=function(){qn.$.N.call(this),Ku(this)};qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ei(){this.g=!0}ei.prototype.Ea=function(){this.g=!1};function km(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function Mm(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function He(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Om(e,n)+(r?" "+r:"")})}function Nm(e,t){e.info(function(){return"TIMEOUT: "+t})}ei.prototype.info=function(){};function Om(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Gs(n)}catch{return t}}var Se={},Tu=null;function ni(){return Tu=Tu||new et}Se.Ta="serverreachability";function Qu(e){ut.call(this,Se.Ta,e)}nt(Qu,ut);function Bn(e){let t=ni();ot(t,new Qu(t))}Se.STAT_EVENT="statevent";function Wu(e,t){ut.call(this,Se.STAT_EVENT,e),this.stat=t}nt(Wu,ut);function mt(e){let t=ni();ot(t,new Wu(t,e))}Se.Ua="timingevent";function Hu(e,t){ut.call(this,Se.Ua,e),this.size=t}nt(Hu,ut);function $n(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){e()},t)}var ri={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qs(){}Qs.prototype.h=null;function Eu(e){return e.h||(e.h=e.i())}function Xu(){}var Kn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ws(){ut.call(this,"d")}nt(Ws,ut);function Hs(){ut.call(this,"c")}nt(Hs,ut);var xs;function ii(){}nt(ii,Qs);ii.prototype.g=function(){return new XMLHttpRequest};ii.prototype.i=function(){return{}};xs=new ii;function Qn(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new qn(this),this.P=Fm,e=vs?125:void 0,this.V=new ti(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var Fm=45e3,Zu={},Ps={};g=Qn.prototype;g.setTimeout=function(e){this.P=e};function Rs(e,t,n){e.L=1,e.A=oi(Yt(t)),e.u=n,e.S=!0,tl(e,null)}function tl(e,t){e.G=Date.now(),Wn(e),e.B=Yt(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),cl(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Ju,e.g=Pl(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ss(ct(e.Pa,e,e.g),e.O)),$u(e.U,e.g,"readystatechange",e.nb),t=e.I?Nu(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Bn(),km(e.j,e.v,e.B,e.m,e.W,e.u)}g.nb=function(e){e=e.target;let t=this.M;t&&Ot(e)==3?t.l():this.Pa(e)};g.Pa=function(e){try{if(e==this.g)t:{let l=Ot(this.g);var t=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||vs||this.g&&(this.h.h||this.g.ja()||Su(this.g)))){this.J||l!=4||t==7||(t==8||0>=h?Bn(3):Bn(2)),si(this);var n=this.g.da();this.ca=n;e:if(el(this)){var r=Su(this.g);e="";var i=r.length,s=Ot(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){be(this),Mn(this);var o="";break e}this.h.i=new b.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Mm(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nn(a)){var u=a;break e}}u=null}if(n=u)He(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ds(this,n);else{this.i=!1,this.s=3,mt(12),be(this),Mn(this);break t}}this.S?(nl(this,l,o),vs&&this.i&&l==3&&($u(this.U,this.V,"tick",this.mb),this.V.start())):(He(this.j,this.m,o,null),Ds(this,o)),l==4&&be(this),this.i&&!this.J&&(l==4?Al(this.l,this):(this.i=!1,Wn(this)))}else sf(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),be(this),Mn(this)}}}catch{}finally{}};function el(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function nl(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=Lm(e,n),i==Ps){t==4&&(e.s=4,mt(14),r=!1),He(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Zu){e.s=4,mt(15),He(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else He(e.j,e.m,i,null),Ds(e,i);el(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,mt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),eo(t),t.M=!0,mt(11))):(He(e.j,e.m,n,"[Invalid Chunked Response]"),be(e),Mn(e))}g.mb=function(){if(this.g){var e=Ot(this.g),t=this.g.ja();this.o<t.length&&(si(this),nl(this,e,t),this.i&&e!=4&&Wn(this))}};function Lm(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Ps:(n=Number(t.substring(n,r)),isNaN(n)?Zu:(r+=1,r+n>t.length?Ps:(t=t.slice(r,r+n),e.o=r+n,t)))}g.cancel=function(){this.J=!0,be(this)};function Wn(e){e.Y=Date.now()+e.P,rl(e,e.P)}function rl(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=$n(ct(e.lb,e),t)}function si(e){e.C&&(b.clearTimeout(e.C),e.C=null)}g.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(Nm(this.j,this.B),this.L!=2&&(Bn(),mt(17)),be(this),this.s=2,Mn(this)):rl(this,this.Y-e)};function Mn(e){e.l.H==0||e.J||Al(e.l,e)}function be(e){si(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,$s(e.V),Ku(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ds(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Vs(n.i,e))){if(!e.K&&Vs(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Kr(n),ui(n);else break t;to(n),mt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=$n(ct(n.ib,n),6e3));if(1>=hl(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ae(n,11)}else if((e.K||n.g==e)&&Kr(n),!Nn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let m=u[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=e.g;if(p){let x=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var s=r.i;s.g||x.indexOf("spdy")==-1&&x.indexOf("quic")==-1&&x.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ys(s,s.h),s.h=null))}if(r.F){let A=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(r.Da=A,F(r.I,r.F,A))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=xl(r,r.J?r.pa:null,r.Y),o.K){dl(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(si(a),Wn(a)),r.g=o}else El(r);0<n.j.length&&li(n)}else u[0]!="stop"&&u[0]!="close"||Ae(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ae(n,7):Zs(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Bn(4)}catch{}}function qm(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Yr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Bm(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Yr(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let r in e)t[n++]=r;return t}}}function il(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Yr(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=Bm(e),r=qm(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Um(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ce(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ce){this.h=e.h,jr(this,e.j),this.s=e.s,this.g=e.g,$r(this,e.m),this.l=e.l;var t=e.i,n=new Un;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bu(this,n),this.o=e.o}else e&&(t=String(e).match(sl))?(this.h=!1,jr(this,t[1]||"",!0),this.s=Vn(t[2]||""),this.g=Vn(t[3]||"",!0),$r(this,t[4]),this.l=Vn(t[5]||"",!0),bu(this,t[6]||"",!0),this.o=Vn(t[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}Ce.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kn(t,Au,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(kn(t,Au,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(kn(n,n.charAt(0)=="/"?jm:Gm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kn(n,Km)),e.join("")};function Yt(e){return new Ce(e)}function jr(e,t,n){e.j=n?Vn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $r(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bu(e,t,n){t instanceof Un?(e.i=t,Qm(e.i,e.h)):(n||(t=kn(t,$m)),e.i=new Un(t,e.h))}function F(e,t,n){e.i.set(t,n)}function oi(e){return F(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kn(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,zm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zm(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Au=/[#\/\?@]/g,Gm=/[#\?:]/g,jm=/[#\?]/g,$m=/[#\?@]/g,Km=/#/g;function Un(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ue(e){e.g||(e.g=new Map,e.h=0,e.i&&Um(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}g=Un.prototype;g.add=function(e,t){ue(this),this.i=null,e=Je(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function ol(e,t){ue(e),t=Je(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function al(e,t){return ue(e),t=Je(e,t),e.g.has(t)}g.forEach=function(e,t){ue(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};g.ta=function(){ue(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};g.Z=function(e){ue(this);let t=[];if(typeof e=="string")al(this,e)&&(t=t.concat(this.g.get(Je(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};g.set=function(e,t){return ue(this),this.i=null,e=Je(this,e),al(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};g.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function cl(e,t,n){ol(e,t),0<n.length&&(e.i=null,e.g.set(Je(e,t),Os(n)),e.h+=n.length)}g.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function Je(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Qm(e,t){t&&!e.j&&(ue(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ol(this,r),cl(this,i,n))},e)),e.j=t}var Wm=class{constructor(e,t){this.g=e,this.map=t}};function ul(e){this.l=e||Hm,b.PerformanceNavigationTiming?(e=b.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(b.g&&b.g.Ka&&b.g.Ka()&&b.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Hm=10;function ll(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function hl(e){return e.h?1:e.g?e.g.size:0}function Vs(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ys(e,t){e.g?e.g.add(t):e.h=t}function dl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ul.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function ml(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.F);return t}return Os(e.i)}var Ym=class{stringify(e){return b.JSON.stringify(e,void 0)}parse(e){return b.JSON.parse(e,void 0)}};function Xm(){this.g=new Ym}function Jm(e,t,n){let r=n||"";try{il(e,function(i,s){let o=i;Gn(i)&&(o=Gs(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zm(e,t){let n=new ei;if(b.Image){let r=new Image;r.onload=Fr(zr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fr(zr,n,r,"TestLoadImage: error",!1,t),r.onabort=Fr(zr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fr(zr,n,r,"TestLoadImage: timeout",!1,t),b.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function zr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function Hn(e){this.l=e.ec||null,this.j=e.ob||!1}nt(Hn,Qs);Hn.prototype.g=function(){return new ai(this.l,this.j)};Hn.prototype.i=function(e){return function(){return e}}({});function ai(e,t){et.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(ai,et);var Xs=0;g=ai.prototype;g.open=function(e,t){if(this.readyState!=Xs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,zn(this)};g.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||b).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};g.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yn(this)),this.readyState=Xs};g.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function fl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}g.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Yn(this):zn(this),this.readyState==3&&fl(this)}};g.Za=function(e){this.g&&(this.response=this.responseText=e,Yn(this))};g.Ya=function(e){this.g&&(this.response=e,Yn(this))};g.ka=function(){this.g&&Yn(this)};function Yn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,zn(e)}g.setRequestHeader=function(e,t){this.v.append(e,t)};g.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};g.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function zn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var tf=b.JSON.parse;function B(e){et.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pl,this.L=this.M=!1}nt(B,et);var pl="",ef=/^https?$/i,nf=["POST","PUT"];g=B.prototype;g.Oa=function(e){this.M=e};g.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xs.g(),this.C=this.u?Eu(this.u):Eu(xs),this.g.onreadystatechange=ct(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){Cu(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=b.FormData&&e instanceof b.FormData,!(0<=Du(nf,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yl(this),0<this.B&&((this.L=rf(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ct(this.ua,this)):this.A=Ks(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Cu(this,s)}};function rf(e){return Xe&&typeof e.timeout=="number"&&e.ontimeout!==void 0}g.ua=function(){typeof Ns<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ot(this,"timeout"),this.abort(8))};function Cu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gl(e),ci(e)}function gl(e){e.F||(e.F=!0,ot(e,"complete"),ot(e,"error"))}g.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ot(this,"complete"),ot(this,"abort"),ci(this))};g.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ci(this,!0)),B.$.N.call(this)};g.La=function(){this.s||(this.G||this.v||this.l?_l(this):this.kb())};g.kb=function(){_l(this)};function _l(e){if(e.h&&typeof Ns<"u"&&(!e.C[1]||Ot(e)!=4||e.da()!=2)){if(e.v&&Ot(e)==4)Ks(e.La,0,e);else if(ot(e,"readystatechange"),Ot(e)==4){e.h=!1;try{let o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(sl)[1]||null;!i&&b.self&&b.self.location&&(i=b.self.location.protocol.slice(0,-1)),r=!ef.test(i?i.toLowerCase():"")}n=r}if(n)ot(e,"complete"),ot(e,"success");else{e.m=6;try{var s=2<Ot(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",gl(e)}}finally{ci(e)}}}}function ci(e,t){if(e.g){yl(e);let n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ot(e,"ready");try{n.onreadystatechange=r}catch{}}}function yl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(b.clearTimeout(e.A),e.A=null)}g.isActive=function(){return!!this.g};function Ot(e){return e.g?e.g.readyState:0}g.da=function(){try{return 2<Ot(this)?this.g.status:-1}catch{return-1}};g.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};g.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),tf(t)}};function Su(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case pl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function sf(e){let t={};e=(e.g&&2<=Ot(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Nn(e[r]))continue;var n=Rm(e[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=t[i]||[];t[i]=s,s.push(n)}Cm(t,function(r){return r.join(", ")})}g.Ia=function(){return this.m};g.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function vl(e){let t="";return Ls(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Js(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=vl(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):F(e,t,n))}function Rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wl(e){this.Ga=0,this.j=[],this.l=new ei,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rn("baseRetryDelayMs",5e3,e),this.hb=Rn("retryDelaySeedMs",1e4,e),this.eb=Rn("forwardChannelMaxRetries",2,e),this.xa=Rn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ul(e&&e.concurrentRequestLimit),this.Ja=new Xm,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}g=wl.prototype;g.ra=8;g.H=1;function Zs(e){if(Il(e),e.H==3){var t=e.W++,n=Yt(e.I);if(F(n,"SID",e.K),F(n,"RID",t),F(n,"TYPE","terminate"),Xn(e,n),t=new Qn(e,e.l,t),t.L=2,t.A=oi(Yt(n)),n=!1,b.navigator&&b.navigator.sendBeacon)try{n=b.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&b.Image&&(new Image().src=t.A,n=!0),n||(t.g=Pl(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Wn(t)}Sl(e)}function ui(e){e.g&&(eo(e),e.g.cancel(),e.g=null)}function Il(e){ui(e),e.u&&(b.clearTimeout(e.u),e.u=null),Kr(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&b.clearTimeout(e.m),e.m=null)}function li(e){if(!ll(e.i)&&!e.m){e.m=!0;var t=e.Na;Fn||Gu(),Ln||(Fn(),Ln=!0),js.add(t,e),e.C=0}}function of(e,t){return hl(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=$n(ct(e.Na,e,t),Cl(e,e.C)),e.C++,!0)}g.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let i=new Qn(this,this.l,e),s=this.s;if(this.U&&(s?(s=Nu(s),Ou(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Tl(this,i,t),n=Yt(this.I),F(n,"RID",e),F(n,"CVER",22),this.F&&F(n,"X-HTTP-Session-Id",this.F),Xn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(vl(s)))+"&"+t:this.o&&Js(n,this.o,s)),Ys(this.i,i),this.bb&&F(n,"TYPE","init"),this.P?(F(n,"$req",t),F(n,"SID","null"),i.aa=!0,Rs(i,n,null)):Rs(i,n,t),this.H=2}}else this.H==3&&(e?xu(this,e):this.j.length==0||ll(this.i)||xu(this))};function xu(e,t){var n;t?n=t.m:n=e.W++;let r=Yt(e.I);F(r,"SID",e.K),F(r,"RID",n),F(r,"AID",e.V),Xn(e,r),e.o&&e.s&&Js(r,e.o,e.s),n=new Qn(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Tl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ys(e.i,n),Rs(n,r,t)}function Xn(e,t){e.na&&Ls(e.na,function(n,r){F(t,r,n)}),e.h&&il({},function(n,r){F(t,r,n)})}function Tl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ct(e.h.Va,e.h,e):null;t:{var i=e.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{Jm(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function El(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fn||Gu(),Ln||(Fn(),Ln=!0),js.add(t,e),e.A=0}}function to(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=$n(ct(e.Ma,e),Cl(e,e.A)),e.A++,!0)}g.Ma=function(){if(this.u=null,bl(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=$n(ct(this.jb,this),e)}};g.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,mt(10),ui(this),bl(this))};function eo(e){e.B!=null&&(b.clearTimeout(e.B),e.B=null)}function bl(e){e.g=new Qn(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Yt(e.wa);F(t,"RID","rpc"),F(t,"SID",e.K),F(t,"AID",e.V),F(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&F(t,"TO",e.qa),F(t,"TYPE","xmlhttp"),Xn(e,t),e.o&&e.s&&Js(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=oi(Yt(t)),n.u=null,n.S=!0,tl(n,e)}g.ib=function(){this.v!=null&&(this.v=null,ui(this),to(this),mt(19))};function Kr(e){e.v!=null&&(b.clearTimeout(e.v),e.v=null)}function Al(e,t){var n=null;if(e.g==t){Kr(e),eo(e),e.g=null;var r=2}else if(Vs(e.i,t))n=t.F,dl(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=ni(),ot(r,new Hu(r,n)),li(e)}else El(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&of(e,t)||r==2&&to(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ae(e,5);break;case 4:Ae(e,10);break;case 3:Ae(e,6);break;default:Ae(e,2)}}}function Cl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ae(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=ct(e.pb,e);n||(n=new Ce("//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||jr(n,"https"),oi(n)),Zm(n.toString(),r)}else mt(2);e.H=0,e.h&&e.h.za(t),Sl(e),Il(e)}g.pb=function(e){e?(this.l.info("Successfully pinged google.com"),mt(2)):(this.l.info("Failed to ping google.com"),mt(1))};function Sl(e){if(e.H=0,e.ma=[],e.h){let t=ml(e.i);(t.length!=0||e.j.length!=0)&&(vu(e.ma,t),vu(e.ma,e.j),e.i.i.length=0,Os(e.j),e.j.length=0),e.h.ya()}}function xl(e,t,n){var r=n instanceof Ce?Yt(n):new Ce(n);if(r.g!="")t&&(r.g=t+"."+r.g),$r(r,r.m);else{var i=b.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ce(null);r&&jr(s,r),t&&(s.g=t),i&&$r(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&F(r,n,t),F(r,"VER",e.ra),Xn(e,r),r}function Pl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new B(new Hn({ob:n})):new B(e.va),t.Oa(e.J),t}g.isActive=function(){return!!this.h&&this.h.isActive(this)};function Rl(){}g=Rl.prototype;g.Ba=function(){};g.Aa=function(){};g.za=function(){};g.ya=function(){};g.isActive=function(){return!0};g.Va=function(){};function Qr(){if(Xe&&!(10<=Number(Tm)))throw Error("Environmental error: no available transport.")}Qr.prototype.g=function(e,t){return new Tt(e,t)};function Tt(e,t){et.call(this),this.g=new wl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Nn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Nn(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Ze(this)}nt(Tt,et);Tt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;mt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xl(e,null,e.Y),li(e)};Tt.prototype.close=function(){Zs(this.g)};Tt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Gs(e),e=n);t.j.push(new Wm(t.fb++,e)),t.H==3&&li(t)};Tt.prototype.N=function(){this.g.h=null,delete this.j,Zs(this.g),delete this.g,Tt.$.N.call(this)};function Dl(e){Ws.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}nt(Dl,Ws);function Vl(){Hs.call(this),this.status=1}nt(Vl,Hs);function Ze(e){this.g=e}nt(Ze,Rl);Ze.prototype.Ba=function(){ot(this.g,"a")};Ze.prototype.Aa=function(e){ot(this.g,new Dl(e))};Ze.prototype.za=function(e){ot(this.g,new Vl)};Ze.prototype.ya=function(){ot(this.g,"b")};function af(){this.blockSize=-1}function Ct(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}nt(Ct,af);Ct.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ys(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}Ct.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)ys(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){ys(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){ys(this,r),i=0;break}}this.h=i,this.i+=t};Ct.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function k(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var cf={};function no(e){return-128<=e&&128>e?vm(e,function(t){return new k([t|0],0>t?-1:0)}):new k([e|0],0>e?-1:0)}function Ft(e){if(isNaN(e)||!isFinite(e))return Ye;if(0>e)return st(Ft(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ks;return new k(t,0)}function kl(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return st(kl(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ft(Math.pow(t,8)),r=Ye,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=Ft(Math.pow(t,s)),r=r.R(s).add(Ft(o))):(r=r.R(n),r=r.add(Ft(o)))}return r}var ks=4294967296,Ye=no(0),Ms=no(1),Pu=no(16777216);g=k.prototype;g.ea=function(){if(At(this))return-st(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ks+r)*t,t*=ks}return e};g.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ht(this))return"0";if(At(this))return"-"+st(this).toString(e);for(var t=Ft(Math.pow(e,6)),n=this,r="";;){var i=Hr(n,t).g;n=Wr(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,Ht(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};g.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Ht(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function At(e){return e.h==-1}g.X=function(e){return e=Wr(this,e),At(e)?-1:Ht(e)?0:1};function st(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new k(n,~e.h).add(Ms)}g.abs=function(){return At(this)?st(this):this};g.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new k(n,n[n.length-1]&-2147483648?-1:0)};function Wr(e,t){return e.add(st(t))}g.R=function(e){if(Ht(this)||Ht(e))return Ye;if(At(this))return At(e)?st(this).R(st(e)):st(st(this).R(e));if(At(e))return st(this.R(st(e)));if(0>this.X(Pu)&&0>e.X(Pu))return Ft(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,c=e.D(i)&65535;n[2*r+2*i]+=o*c,Gr(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Gr(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Gr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Gr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new k(n,0)};function Gr(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Dn(e,t){this.g=e,this.h=t}function Hr(e,t){if(Ht(t))throw Error("division by zero");if(Ht(e))return new Dn(Ye,Ye);if(At(e))return t=Hr(st(e),t),new Dn(st(t.g),st(t.h));if(At(t))return t=Hr(e,st(t)),new Dn(st(t.g),t.h);if(30<e.g.length){if(At(e)||At(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ms,r=t;0>=r.X(e);)n=Ru(n),r=Ru(r);var i=We(n,1),s=We(r,1);for(r=We(r,2),n=We(n,2);!Ht(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=We(r,1),n=We(n,1)}return t=Wr(e,i.R(t)),new Dn(i,t)}for(i=Ye;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ft(n),o=s.R(t);At(o)||0<o.X(e);)n-=r,s=Ft(n),o=s.R(t);Ht(s)&&(s=Ms),i=i.add(s),e=Wr(e,o)}return new Dn(i,e)}g.gb=function(e){return Hr(this,e).h};g.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new k(n,this.h&e.h)};g.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new k(n,this.h|e.h)};g.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new k(n,this.h^e.h)};function Ru(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new k(n,e.h)}function We(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new k(i,e.h)}Qr.prototype.createWebChannel=Qr.prototype.g;Tt.prototype.send=Tt.prototype.u;Tt.prototype.open=Tt.prototype.m;Tt.prototype.close=Tt.prototype.close;ri.NO_ERROR=0;ri.TIMEOUT=8;ri.HTTP_ERROR=6;Yu.COMPLETE="complete";Xu.EventType=Kn;Kn.OPEN="a";Kn.CLOSE="b";Kn.ERROR="c";Kn.MESSAGE="d";et.prototype.listen=et.prototype.O;B.prototype.listenOnce=B.prototype.P;B.prototype.getLastError=B.prototype.Sa;B.prototype.getLastErrorCode=B.prototype.Ia;B.prototype.getStatus=B.prototype.da;B.prototype.getResponseJson=B.prototype.Wa;B.prototype.getResponseText=B.prototype.ja;B.prototype.send=B.prototype.ha;B.prototype.setWithCredentials=B.prototype.Oa;Ct.prototype.digest=Ct.prototype.l;Ct.prototype.reset=Ct.prototype.reset;Ct.prototype.update=Ct.prototype.j;k.prototype.add=k.prototype.add;k.prototype.multiply=k.prototype.R;k.prototype.modulo=k.prototype.gb;k.prototype.compare=k.prototype.X;k.prototype.toNumber=k.prototype.ea;k.prototype.toString=k.prototype.toString;k.prototype.getBits=k.prototype.D;k.fromNumber=Ft;k.fromString=kl;var Ml=St.createWebChannelTransport=function(){return new Qr},Nl=St.getStatEventTarget=function(){return ni()},hi=St.ErrorCode=ri,Ol=St.EventType=Yu,Fl=St.Event=Se,ro=St.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},T_=St.FetchXmlHttpFactory=Hn,Jn=St.WebChannel=Xu,Ll=St.XhrIo=B,ql=St.Md5=Ct,xe=St.Integer=k;var Bl="@firebase/firestore";var rt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var wn="10.8.1";var Me=new Yc("@firebase/firestore");function Zn(){return Me.logLevel}function _(e,...t){if(Me.logLevel<=Wt.DEBUG){let n=t.map($a);Me.debug(`Firestore (${wn}): ${e}`,...n)}}function jt(e,...t){if(Me.logLevel<=Wt.ERROR){let n=t.map($a);Me.error(`Firestore (${wn}): ${e}`,...n)}}function an(e,...t){if(Me.logLevel<=Wt.WARN){let n=t.map($a);Me.warn(`Firestore (${wn}): ${e}`,...n)}}function $a(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function E(e="Unexpected state"){let t=`FIRESTORE (${wn}) INTERNAL ASSERTION FAILED: `+e;throw jt(t),new Error(t)}function O(e,t){e||E()}function S(e,t){return e}var d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},y=class extends Wc{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var gi=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},co=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}},uo=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},lo=class{constructor(t){this.t=t,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bt,t.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(_("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bt)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(O(typeof r.accessToken=="string"),new gi(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return O(t===null||typeof t=="string"),new rt(t)}},ho=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},mo=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new ho(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fo=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},po=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let r=s=>{s.error!=null&&_("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,_("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};let i=s=>{_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(O(typeof n.token=="string"),this.R=n.token,new fo(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function uf(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _i=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";for(;r.length<20;){let i=uf(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}};function V(e,t){return e<t?-1:e>t?1:0}function cn(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}var H=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new y(d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new y(d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new y(d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new y(d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?V(this.nanoseconds,t.nanoseconds):V(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var C=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new H(0,0))}static max(){return new e(new H(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yi=class e{constructor(t,n,r){n===void 0?n=0:n>t.length&&E(),r===void 0?r=t.length-n:r>t.length-n&&E(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},q=class e extends yi{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let r of t){if(r.indexOf("//")>=0)throw new y(d.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new e(n)}static emptyPath(){return new e([])}},lf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class e extends yi{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(t){return lf.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new y(d.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<t.length;){let a=t[i];if(a==="\\"){if(i+1===t.length)throw new y(d.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new y(d.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new y(d.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var I=class e{constructor(t){this.path=t}static fromPath(t){return new e(q.fromString(t))}static fromName(t){return new e(q.fromString(t).popFirst(5))}static empty(){return new e(q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&q.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return q.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new q(t.slice()))}};var go=class{constructor(t,n,r,i){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}};go.UNKNOWN_ID=-1;function hf(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=C.fromTimestamp(r===1e9?new H(n+1,0):new H(n,r));return new Ne(i,I.empty(),t)}function df(e){return new Ne(e.readTime,e.key,-1)}var Ne=class e{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new e(C.min(),I.empty(),-1)}static max(){return new e(C.max(),I.empty(),-1)}};function mf(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=I.comparator(e.documentKey,t.documentKey),n!==0?n:V(e.largestBatchId,t.largestBatchId))}var ff="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_o=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function _r(e){return v(this,null,function*(){if(e.code!==d.FAILED_PRECONDITION||e.message!==ff)throw e;_("LocalStore","Unexpectedly lost primary lease")})}var f=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&E(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,r)=>{n(t)})}static reject(t){return new e((n,r)=>{r(t)})}static waitFor(t){return new e((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next(i=>i?e.resolve(i):r());return n}static forEach(t,n){let r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new e((r,i)=>{let s=t.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(t[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(t,n){return new e((r,i)=>{let s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}};var yo=class e{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ke(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Ka(r.target.error);this.V.reject(new ke(t,i))}}static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new ke(n,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let n=this.transaction.objectStore(t);return new wo(n)}},vi=class e{constructor(t,n,r){this.name=t,this.version=n,this.p=r,e.S(xn())===12.2&&jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return _("SimpleDb","Removing database:",t),Pe(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Qc())return!1;if(e.C())return!0;let t=xn(),n=e.S(t),r=0<n&&n<10,i=e.v(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){let n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){let n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(t){return v(this,null,function*(){return this.db||(_("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new ke(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new y(d.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new y(d.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ke(t,o))},i.onupgradeneeded=s=>{_("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{_("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}runTransaction(t,n,r,i){return v(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(t);let a=yo.open(this.db,t,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),f.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(_("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},vo=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Pe(this.k.delete())}},ke=class extends y{constructor(t,n){super(d.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function yr(e){return e.name==="IndexedDbTransactionError"}var wo=class{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(_("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(_("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Pe(r)}add(t){return _("SimpleDb","ADD",this.store.name,t,t),Pe(this.store.add(t))}get(t){return Pe(this.store.get(t)).next(n=>(n===void 0&&(n=null),_("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return _("SimpleDb","DELETE",this.store.name,t),Pe(this.store.delete(t))}count(){return _("SimpleDb","COUNT",this.store.name),Pe(this.store.count())}W(t,n){let r=this.options(t,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new f((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){let r=this.store.getAll(t,n===null?void 0:n);return new f((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(t,n){_("SimpleDb","DELETE ALL",this.store.name);let r=this.options(t,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);let i=this.cursor(r);return this.G(i,n)}Z(t){let n=this.cursor({});return new f((r,i)=>{n.onerror=s=>{let o=Ka(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){let r=[];return new f((i,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new vo(a),u=n(a.primaryKey,a.value,c);if(u instanceof f){let l=u.catch(h=>(c.done(),f.reject(h)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>f.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){let r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}};function Pe(e){return new f((t,n)=>{e.onsuccess=r=>{let i=r.target.result;t(i)},e.onerror=r=>{let i=Ka(r.target.error);n(i)}})}var Ul=!1;function Ka(e){let t=vi.S(xn());if(t>=12.2&&t<13){let n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){let r=new y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ul||(Ul=!0,setTimeout(()=>{throw r},0)),r}}return e}var vh=(()=>{class e{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return e._e=-1,e})();function Qi(e){return e==null}function sr(e){return e===0&&1/e==-1/0}function pf(e){return typeof e=="number"&&Number.isInteger(e)&&!sr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var gf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M_=[...gf,"documentOverlays"],_f=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yf=_f,N_=[...yf,"indexConfiguration","indexState","indexEntries"];function zl(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function In(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wh(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var z=class e{constructor(t,n){this.comparator=t,this.root=n||Ut.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){let t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rn(this.root,t,this.comparator,!1)}getReverseIterator(){return new rn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rn(this.root,t,this.comparator,!0)}},rn=class{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ut=class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this,s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw E();let t=this.left.check();if(t!==this.right.check())throw E();return t+(this.isRed()?0:1)}};Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw E()}get value(){throw E()}get color(){throw E()}get left(){throw E()}get right(){throw E()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Ut(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ht=class e{constructor(t){this.comparator=t,this.data=new z(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){let r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wi(this.data.getIterator())}getIteratorFrom(t){return new wi(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},wi=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var qt=class e{constructor(t){this.fields=t,t.sort(Et.comparator)}static empty(){return new e([])}unionWith(t){let n=new ht(Et.comparator);for(let r of this.fields)n=n.add(r);for(let r of t)n=n.add(r);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return cn(this.fields,t.fields,(n,r)=>n.isEqual(r))}};var Ii=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ii("Invalid base64 string: "+s):s}}(t);return new e(n)}static fromUint8Array(t){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return V(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var vf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function de(e){if(O(!!e),typeof e=="string"){let t=0,n=vf.exec(e);if(O(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:U(e.seconds),nanos:U(e.nanos)}}function U(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function me(e){return typeof e=="string"?ft.fromBase64String(e):ft.fromUint8Array(e)}function Qa(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Wa(e){let t=e.mapValue.fields.__previous_value__;return Qa(t)?Wa(t):t}function or(e){let t=de(e.mapValue.fields.__local_write_time__.timestampValue);return new H(t.seconds,t.nanos)}var Io=class{constructor(t,n,r,i,s,o,a,c,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ti=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oe(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qa(e)?4:Ih(e)?9007199254740991:10:E()}function $t(e,t){if(e===t)return!0;let n=Oe(e);if(n!==Oe(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return or(e).isEqual(or(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=de(i.timestampValue),a=de(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return me(i.bytesValue).isEqual(me(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return U(i.geoPointValue.latitude)===U(s.geoPointValue.latitude)&&U(i.geoPointValue.longitude)===U(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return U(i.integerValue)===U(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=U(i.doubleValue),a=U(s.doubleValue);return o===a?sr(o)===sr(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return cn(e.arrayValue.values||[],t.arrayValue.values||[],$t);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zl(o)!==zl(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!$t(o[c],a[c])))return!1;return!0}(e,t);default:return E()}}function ar(e,t){return(e.values||[]).find(n=>$t(n,t))!==void 0}function un(e,t){if(e===t)return 0;let n=Oe(e),r=Oe(t);if(n!==r)return V(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return V(e.booleanValue,t.booleanValue);case 2:return function(s,o){let a=U(s.integerValue||s.doubleValue),c=U(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return Gl(e.timestampValue,t.timestampValue);case 4:return Gl(or(e),or(t));case 5:return V(e.stringValue,t.stringValue);case 6:return function(s,o){let a=me(s),c=me(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=V(a[u],c[u]);if(l!==0)return l}return V(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){let a=V(U(s.latitude),U(o.latitude));return a!==0?a:V(U(s.longitude),U(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=un(a[u],c[u]);if(l)return l}return V(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===di.mapValue&&o===di.mapValue)return 0;if(s===di.mapValue)return 1;if(o===di.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){let m=V(c[h],l[h]);if(m!==0)return m;let p=un(a[c[h]],u[l[h]]);if(p!==0)return p}return V(c.length,l.length)}(e.mapValue,t.mapValue);default:throw E()}}function Gl(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return V(e,t);let n=de(e),r=de(t),i=V(n.seconds,r.seconds);return i!==0?i:V(n.nanos,r.nanos)}function ln(e){return To(e)}function To(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let r=de(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return me(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return I.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=To(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${To(n.fields[o])}`;return i+"}"}(e.mapValue):E()}function jl(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Eo(e){return!!e&&"integerValue"in e}function Ha(e){return!!e&&"arrayValue"in e}function $l(e){return!!e&&"nullValue"in e}function Kl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fi(e){return!!e&&"mapValue"in e}function er(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return In(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=er(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=er(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ih(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var xt=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!fi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=er(n)}setAll(t){let n=Et.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=er(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){let n=this.field(t.popLast());fi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $t(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];fi(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){In(n,(i,s)=>t[i]=s);for(let i of r)delete t[i]}clone(){return new e(er(this.value))}};function Th(e){let t=[];return In(e.fields,(n,r)=>{let i=new Et([n]);if(fi(r)){let s=Th(r.mapValue).fields;if(s.length===0)t.push(i);else for(let o of s)t.push(i.child(o))}else t.push(i)}),new qt(t)}var Pt=class e{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,C.min(),C.min(),C.min(),xt.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,C.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,C.min(),C.min(),xt.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,C.min(),C.min(),xt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(C.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=C.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hn=class{constructor(t,n){this.position=t,this.inclusive=n}};function Ql(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(s.field.isKeyField()?r=I.comparator(I.fromName(o.referenceValue),n.key):r=un(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wl(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$t(e.position[n],t.position[n]))return!1;return!0}var dn=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function wf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ei=class{},W=class e extends Ei{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Ao(t,n,r):n==="array-contains"?new xo(t,r):n==="in"?new Po(t,r):n==="not-in"?new Ro(t,r):n==="array-contains-any"?new Do(t,r):new e(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Co(t,r):new So(t,r)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(un(n,this.value)):n!==null&&Oe(this.value)===Oe(n)&&this.matchesComparison(un(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return E()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rt=class e extends Ei{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new e(t,n)}matches(t){return Eh(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Eh(e){return e.op==="and"}function bh(e){return If(e)&&Eh(e)}function If(e){for(let t of e.filters)if(t instanceof Rt)return!1;return!0}function bo(e){if(e instanceof W)return e.field.canonicalString()+e.op.toString()+ln(e.value);if(bh(e))return e.filters.map(t=>bo(t)).join(",");{let t=e.filters.map(n=>bo(n)).join(",");return`${e.op}(${t})`}}function Ah(e,t){return e instanceof W?function(r,i){return i instanceof W&&r.op===i.op&&r.field.isEqual(i.field)&&$t(r.value,i.value)}(e,t):e instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Ah(o,i.filters[a]),!0):!1}(e,t):void E()}function Ch(e){return e instanceof W?function(n){return`${n.field.canonicalString()} ${n.op} ${ln(n.value)}`}(e):e instanceof Rt?function(n){return n.op.toString()+" {"+n.getFilters().map(Ch).join(" ,")+"}"}(e):"Filter"}var Ao=class extends W{constructor(t,n,r){super(t,n,r),this.key=I.fromName(r.referenceValue)}matches(t){let n=I.comparator(t.key,this.key);return this.matchesComparison(n)}},Co=class extends W{constructor(t,n){super(t,"in",n),this.keys=Sh("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},So=class extends W{constructor(t,n){super(t,"not-in",n),this.keys=Sh("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function Sh(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>I.fromName(r.referenceValue))}var xo=class extends W{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return Ha(n)&&ar(n.arrayValue,this.value)}},Po=class extends W{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&ar(this.value.arrayValue,n)}},Ro=class extends W{constructor(t,n){super(t,"not-in",n)}matches(t){if(ar(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!ar(this.value.arrayValue,n)}},Do=class extends W{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!Ha(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ar(this.value.arrayValue,r))}};var Vo=class{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Hl(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Vo(e,t,n,r,i,s,o)}function Ya(e){let t=S(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>bo(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Qi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ln(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ln(r)).join(",")),t.ce=n}return t.ce}function Xa(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ah(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Wl(e.startAt,t.startAt)&&Wl(e.endAt,t.endAt)}function ko(e){return I.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Fe=class{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Tf(e,t,n,r,i,s,o,a){return new Fe(e,t,n,r,i,s,o,a)}function Ja(e){return new Fe(e)}function Yl(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function xh(e){return e.collectionGroup!==null}function nr(e){let t=S(e);if(t.le===null){t.le=[];let n=new Set;for(let s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ht(Et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new dn(s,r))}),n.has(Et.keyField().canonicalString())||t.le.push(new dn(Et.keyField(),r))}return t.le}function zt(e){let t=S(e);return t.he||(t.he=Ef(t,nr(e))),t.he}function Ef(e,t){if(e.limitType==="F")return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new dn(i.field,s)});let n=e.endAt?new hn(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hn(e.startAt.position,e.startAt.inclusive):null;return Hl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Mo(e,t){let n=e.filters.concat([t]);return new Fe(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function No(e,t,n){return new Fe(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wi(e,t){return Xa(zt(e),zt(t))&&e.limitType===t.limitType}function Ph(e){return`${Ya(zt(e))}|lt:${e.limitType}`}function tn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ch(i)).join(", ")}]`),Qi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ln(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ln(i)).join(",")),`Target(${r})`}(zt(e))}; limitType=${e.limitType})`}function Hi(e,t){return t.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):I.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(let s of nr(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=Ql(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,nr(r),i)||r.endAt&&!function(o,a,c){let u=Ql(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,nr(r),i))}(e,t)}function bf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rh(e){return(t,n)=>{let r=!1;for(let i of nr(e)){let s=Af(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Af(e,t,n){let r=e.field.isKeyField()?I.comparator(t.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?un(c,u):E()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return E()}}var fe=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){let r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){In(this.inner,(n,r)=>{for(let[i,s]of r)t(i,s)})}isEmpty(){return wh(this.inner)}size(){return this.innerSize}};var Cf=new z(I.comparator);function Jt(){return Cf}var Dh=new z(I.comparator);function tr(...e){let t=Dh;for(let n of e)t=t.insert(n.key,n);return t}function Vh(e){let t=Dh;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Re(){return rr()}function kh(){return rr()}function rr(){return new fe(e=>e.toString(),(e,t)=>e.isEqual(t))}var Sf=new z(I.comparator),xf=new ht(I.comparator);function P(...e){let t=xf;for(let n of e)t=t.add(n);return t}var Pf=new ht(V);function Rf(){return Pf}function Mh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sr(t)?"-0":t}}function Nh(e){return{integerValue:""+e}}function Df(e,t){return pf(t)?Nh(t):Mh(e,t)}var mn=class{constructor(){this._=void 0}};function Vf(e,t,n){return e instanceof fn?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qa(s)&&(s=Wa(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof Le?Fh(e,t):e instanceof qe?Lh(e,t):function(i,s){let o=Oh(i,s),a=Xl(o)+Xl(i.Ie);return Eo(o)&&Eo(i.Ie)?Nh(a):Mh(i.serializer,a)}(e,t)}function kf(e,t,n){return e instanceof Le?Fh(e,t):e instanceof qe?Lh(e,t):n}function Oh(e,t){return e instanceof pn?function(r){return Eo(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}var fn=class extends mn{},Le=class extends mn{constructor(t){super(),this.elements=t}};function Fh(e,t){let n=qh(t);for(let r of e.elements)n.some(i=>$t(i,r))||n.push(r);return{arrayValue:{values:n}}}var qe=class extends mn{constructor(t){super(),this.elements=t}};function Lh(e,t){let n=qh(t);for(let r of e.elements)n=n.filter(i=>!$t(i,r));return{arrayValue:{values:n}}}var pn=class extends mn{constructor(t,n){super(),this.serializer=t,this.Ie=n}};function Xl(e){return U(e.integerValue||e.doubleValue)}function qh(e){return Ha(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function Mf(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Le&&i instanceof Le||r instanceof qe&&i instanceof qe?cn(r.elements,i.elements,$t):r instanceof pn&&i instanceof pn?$t(r.Ie,i.Ie):r instanceof fn&&i instanceof fn}(e.transform,t.transform)}var Oo=class{constructor(t,n){this.version=t,this.transformResults=n}},Xt=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function pi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var gn=class{};function Bh(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cr(e.key,Xt.none()):new Be(e.key,e.data,Xt.none());{let n=e.data,r=xt.empty(),i=new ht(Et.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zt(e.key,r,new qt(i.toArray()),Xt.none())}}function Nf(e,t,n){e instanceof Be?function(i,s,o){let a=i.value.clone(),c=Zl(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Zt?function(i,s,o){if(!pi(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Zl(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Uh(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ir(e,t,n,r){return e instanceof Be?function(s,o,a,c){if(!pi(s.precondition,o))return a;let u=s.value.clone(),l=th(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zt?function(s,o,a,c){if(!pi(s.precondition,o))return a;let u=th(s.fieldTransforms,c,o),l=o.data;return l.setAll(Uh(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(s,o,a){return pi(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Of(e,t){let n=null;for(let r of e.fieldTransforms){let i=t.data.field(r.field),s=Oh(r.transform,i||null);s!=null&&(n===null&&(n=xt.empty()),n.set(r.field,s))}return n||null}function Jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cn(r,i,(s,o)=>Mf(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Be=class extends gn{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zt=class extends gn{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Uh(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}}),t}function Zl(e,t,n){let r=new Map;O(e.length===n.length);for(let i=0;i<n.length;i++){let s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,kf(o,a,n[i]))}return r}function th(e,t,n){let r=new Map;for(let i of e){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Vf(s,o,t))}return r}var cr=class extends gn{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fo=class extends gn{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lo=class{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(t.key)&&Nf(s,t,r[i])}}applyToLocalView(t,n){for(let r of this.baseMutations)r.key.isEqual(t.key)&&(n=ir(r,t,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(t.key)&&(n=ir(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let r=kh();return this.mutations.forEach(i=>{let s=t.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Bh(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(C.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),P())}isEqual(t){return this.batchId===t.batchId&&cn(this.mutations,t.mutations,(n,r)=>Jl(n,r))&&cn(this.baseMutations,t.baseMutations,(n,r)=>Jl(n,r))}},qo=class e{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){O(t.mutations.length===r.length);let i=function(){return Sf}(),s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new e(t,n,r,i)}};var Bo=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Uo=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var K,R;function Ff(e){switch(e){default:return E();case d.CANCELLED:case d.UNKNOWN:case d.DEADLINE_EXCEEDED:case d.RESOURCE_EXHAUSTED:case d.INTERNAL:case d.UNAVAILABLE:case d.UNAUTHENTICATED:return!1;case d.INVALID_ARGUMENT:case d.NOT_FOUND:case d.ALREADY_EXISTS:case d.PERMISSION_DENIED:case d.FAILED_PRECONDITION:case d.ABORTED:case d.OUT_OF_RANGE:case d.UNIMPLEMENTED:case d.DATA_LOSS:return!0}}function zh(e){if(e===void 0)return jt("GRPC error has no .code"),d.UNKNOWN;switch(e){case K.OK:return d.OK;case K.CANCELLED:return d.CANCELLED;case K.UNKNOWN:return d.UNKNOWN;case K.DEADLINE_EXCEEDED:return d.DEADLINE_EXCEEDED;case K.RESOURCE_EXHAUSTED:return d.RESOURCE_EXHAUSTED;case K.INTERNAL:return d.INTERNAL;case K.UNAVAILABLE:return d.UNAVAILABLE;case K.UNAUTHENTICATED:return d.UNAUTHENTICATED;case K.INVALID_ARGUMENT:return d.INVALID_ARGUMENT;case K.NOT_FOUND:return d.NOT_FOUND;case K.ALREADY_EXISTS:return d.ALREADY_EXISTS;case K.PERMISSION_DENIED:return d.PERMISSION_DENIED;case K.FAILED_PRECONDITION:return d.FAILED_PRECONDITION;case K.ABORTED:return d.ABORTED;case K.OUT_OF_RANGE:return d.OUT_OF_RANGE;case K.UNIMPLEMENTED:return d.UNIMPLEMENTED;case K.DATA_LOSS:return d.DATA_LOSS;default:return E()}}(R=K||(K={}))[R.OK=0]="OK",R[R.CANCELLED=1]="CANCELLED",R[R.UNKNOWN=2]="UNKNOWN",R[R.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",R[R.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",R[R.NOT_FOUND=5]="NOT_FOUND",R[R.ALREADY_EXISTS=6]="ALREADY_EXISTS",R[R.PERMISSION_DENIED=7]="PERMISSION_DENIED",R[R.UNAUTHENTICATED=16]="UNAUTHENTICATED",R[R.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",R[R.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",R[R.ABORTED=10]="ABORTED",R[R.OUT_OF_RANGE=11]="OUT_OF_RANGE",R[R.UNIMPLEMENTED=12]="UNIMPLEMENTED",R[R.INTERNAL=13]="INTERNAL",R[R.UNAVAILABLE=14]="UNAVAILABLE",R[R.DATA_LOSS=15]="DATA_LOSS";var eh=null;function Lf(){return new TextEncoder}var qf=new xe([4294967295,4294967295],0);function nh(e){let t=Lf().encode(e),n=new ql;return n.update(t),new Uint8Array(n.digest())}function rh(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new xe([n,r],0),new xe([i,s],0)]}var zo=class e{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new De(`Invalid padding: ${n}`);if(r<0)throw new De(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new De(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new De(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=xe.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(xe.fromNumber(r)));return i.compare(qf)===1&&(i=new xe([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let n=nh(t),[r,i]=rh(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new e(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;let n=nh(t),[r,i]=rh(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(t){let n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}},De=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bi=class e{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,ur.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(C.min(),i,new z(V),Jt(),P())}},ur=class e{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,P(),P(),P())}};var sn=class{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}},Ai=class{constructor(t,n){this.targetId=t,this.fe=n}},Ci=class{constructor(t,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}},Si=class{constructor(){this.ge=0,this.pe=sh(),this.ye=ft.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=P(),n=P(),r=P();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:E()}}),new ur(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=sh()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,O(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Go=class{constructor(t){this.Le=t,this.ke=new Map,this.qe=Jt(),this.Qe=ih(),this.Ke=new z(V)}$e(t){for(let n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(let n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{let r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:E()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){let n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){let s=i.target;if(ko(s))if(r===0){let o=new I(s.path);this.We(n,o,Pt.newNoDocument(o,C.min()))}else O(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}eh?.tt(function(l,h,m,p,x){var A,w,M,G,it,vt;let _e={localCacheCount:l,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},pt=h.unchangedNames;return pt&&(_e.bloomFilter={applied:x===0,hashCount:(A=pt?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(G=(M=(w=pt?.bits)===null||w===void 0?void 0:w.bitmap)===null||M===void 0?void 0:M.length)!==null&&G!==void 0?G:0,padding:(vt=(it=pt?.bits)===null||it===void 0?void 0:it.padding)!==null&&vt!==void 0?vt:0,mightContain:Ge=>{var Ir;return(Ir=p?.mightContain(Ge))!==null&&Ir!==void 0&&Ir}}),_e}(o,t.fe,this.Le.nt(),a,c))}}}}Xe(t){let n=t.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=me(r).toUint8Array()}catch(c){if(c instanceof Ii)return an("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new zo(o,i,s)}catch(c){return an(c instanceof De?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&ko(a.target)){let c=new I(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Pt.newNoDocument(c,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=P();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));let i=new bi(t,n,this.Ke,this.qe,r);return this.qe=Jt(),this.Qe=ih(),this.Ke=new z(V),i}Ue(t,n){if(!this.je(t))return;let r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;let i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){let n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Si,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new ht(V),this.Qe=this.Qe.insert(t,n)),n}je(t){let n=this.Ye(t)!==null;return n||_("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){let n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Si),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function ih(){return new z(I.comparator)}function sh(){return new z(I.comparator)}var Bf={asc:"ASCENDING",desc:"DESCENDING"},Uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zf={and:"AND",or:"OR"},jo=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function $o(e,t){return e.useProto3Json||Qi(t)?t:{value:t}}function xi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gf(e,t){return xi(e,t.toTimestamp())}function Gt(e){return O(!!e),C.fromTimestamp(function(n){let r=de(n);return new H(r.seconds,r.nanos)}(e))}function Za(e,t){return Ko(e,t).canonicalString()}function Ko(e,t){let n=function(i){return new q(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function jh(e){let t=q.fromString(e);return O(Hh(t)),t}function Qo(e,t){return Za(e.databaseId,t.path)}function io(e,t){let n=jh(t);if(n.get(1)!==e.databaseId.projectId)throw new y(d.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new y(d.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new I(Kh(n))}function $h(e,t){return Za(e.databaseId,t)}function jf(e){let t=jh(e);return t.length===4?q.emptyPath():Kh(t)}function Wo(e){return new q(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Kh(e){return O(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function oh(e,t,n){return{name:Qo(e,t),fields:n.value.mapValue.fields}}function $f(e,t){let n;if("targetChange"in t){t.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:E()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(O(l===void 0||typeof l=="string"),ft.fromBase64String(l||"")):(O(l===void 0||l instanceof Uint8Array),ft.fromUint8Array(l||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){let l=u.code===void 0?d.UNKNOWN:zh(u.code);return new y(l,u.message||"")}(o);n=new Ci(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=io(e,r.document.name),s=Gt(r.document.updateTime),o=r.document.createTime?Gt(r.document.createTime):C.min(),a=new xt({mapValue:{fields:r.document.fields}}),c=Pt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new sn(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let i=io(e,r.document),s=r.readTime?Gt(r.readTime):C.min(),o=Pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new sn([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let i=io(e,r.document),s=r.removedTargetIds||[];n=new sn([],s,i,null)}else{if(!("filter"in t))return E();{t.filter;let r=t.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Uo(i,s),a=r.targetId;n=new Ai(a,o)}}return n}function Kf(e,t){let n;if(t instanceof Be)n={update:oh(e,t.key,t.value)};else if(t instanceof cr)n={delete:Qo(e,t.key)};else if(t instanceof Zt)n={update:oh(e,t.key,t.data),updateMask:ep(t.fieldMask)};else{if(!(t instanceof Fo))return E();n={verify:Qo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof fn)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Le)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qe)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pn)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw E()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Gf(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:E()}(e,t.precondition)),n}function Qf(e,t){return e&&e.length>0?(O(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Gt(i.updateTime):Gt(s);return o.isEqual(C.min())&&(o=Gt(s)),new Oo(o,i.transformResults||[])}(n,t))):[]}function Wf(e,t){return{documents:[$h(e,t.path)]}}function Hf(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$h(e,i);let s=function(u){if(u.length!==0)return Wh(Rt.create(u,"and"))}(t.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(m){return{field:en(m.field),direction:Jf(m.dir)}}(l))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let a=$o(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ut:n,parent:i}}function Yf(e){let t=jf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){O(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:t=t.child(l.collectionId)}let s=[];n.where&&(s=function(h){let m=Qh(h);return m instanceof Rt&&bh(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(x){return new dn(nn(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Qi(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){let m=!!h.before,p=h.values||[];return new hn(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){let m=!h.before,p=h.values||[];return new hn(p,m)}(n.endAt)),Tf(t,i,o,s,a,"F",c,u)}function Xf(e,t){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return E()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Qh(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=nn(n.unaryFilter.field);return W.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nn(n.unaryFilter.field);return W.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=nn(n.unaryFilter.field);return W.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=nn(n.unaryFilter.field);return W.create(o,"!=",{nullValue:"NULL_VALUE"});default:return E()}}(e):e.fieldFilter!==void 0?function(n){return W.create(nn(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return E()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Rt.create(n.compositeFilter.filters.map(r=>Qh(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return E()}}(n.compositeFilter.op))}(e):E()}function Jf(e){return Bf[e]}function Zf(e){return Uf[e]}function tp(e){return zf[e]}function en(e){return{fieldPath:e.canonicalString()}}function nn(e){return Et.fromServerFormat(e.fieldPath)}function Wh(e){return e instanceof W?function(n){if(n.op==="=="){if(Kl(n.value))return{unaryFilter:{field:en(n.field),op:"IS_NAN"}};if($l(n.value))return{unaryFilter:{field:en(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kl(n.value))return{unaryFilter:{field:en(n.field),op:"IS_NOT_NAN"}};if($l(n.value))return{unaryFilter:{field:en(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:en(n.field),op:Zf(n.op),value:n.value}}}(e):e instanceof Rt?function(n){let r=n.getFilters().map(i=>Wh(i));return r.length===1?r[0]:{compositeFilter:{op:tp(n.op),filters:r}}}(e):E()}function ep(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Hh(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var lr=class e{constructor(t,n,r,i,s=C.min(),o=C.min(),a=ft.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Ho=class{constructor(t){this.ct=t}};function np(e){let t=Yf({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?No(t,t.limit,"L"):t}var Pi=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(U(t.integerValue));else if("doubleValue"in t){let r=U(t.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),sr(r)?n.dt(0):n.dt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(me(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let r=t.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in t?Ih(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):E()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let r=t.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(t,n){let r=t.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(t,n){this.Et(n,37),I.fromName(t).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};Pi.bt=new Pi;var Yo=class{constructor(){this._n=new Xo}addToCollectionParentIndex(t,n){return this._n.add(n),f.resolve()}getCollectionParents(t,n){return f.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return f.resolve()}deleteFieldIndex(t,n){return f.resolve()}deleteAllFieldIndexes(t){return f.resolve()}createTargetIndexes(t,n){return f.resolve()}getDocumentsMatchingTarget(t,n){return f.resolve(null)}getIndexType(t,n){return f.resolve(0)}getFieldIndexes(t,n){return f.resolve([])}getNextCollectionGroupToUpdate(t){return f.resolve(null)}getMinOffset(t,n){return f.resolve(Ne.min())}getMinOffsetFromCollectionGroup(t,n){return f.resolve(Ne.min())}updateCollectionGroup(t,n,r){return f.resolve()}updateIndexEntries(t,n){return f.resolve()}},Xo=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ht(q.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ht(q.comparator)).toArray()}};var F_=new Uint8Array(0);var Lt=class e{constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(41943040,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);var hr=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Bn(){return new e(-1)}};var Jo=class{constructor(){this.changes=new fe(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Pt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?f.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Zo=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var ta=class{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&ir(r.mutation,i,qt.empty(),H.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,P()).next(()=>r))}getLocalViewOfDocuments(t,n,r=P()){let i=Re();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=tr();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let r=Re();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,P()))}populateOverlays(t,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Jt(),o=rr(),a=function(){return rr()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Zt)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),ir(l.mutation,u,l.mutation.getFieldMask(),H.now())):o.set(u.key,qt.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var h;return a.set(u,new Zo(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){let r=rr(),i=new z((o,a)=>o-a),s=P();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||qt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let h=(i.get(a.batchId)||P()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,h=kh();l.forEach(m=>{if(!s.has(m)){let p=Bh(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,h))}return f.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return I.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):xh(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):f.resolve(Re()),a=-1,c=s;return o.next(u=>f.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?f.resolve():this.remoteDocumentCache.getEntry(t,l).next(m=>{c=c.insert(l,m)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,P())).next(l=>({batchId:a,changes:Vh(l)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new I(n)).next(r=>{let i=tr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){let s=n.collectionGroup,o=tr();return this.indexManager.getCollectionParents(t,s).next(a=>f.forEach(a,c=>{let u=function(h,m){return new Fe(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(l=>{l.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Pt.newInvalidDocument(l)))});let a=tr();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&ir(l.mutation,u,qt.empty(),H.now()),Hi(n,u)&&(a=a.insert(c,u))}),a})}};var ea=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return f.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Gt(i.createTime)}}(n)),f.resolve()}getNamedQuery(t,n){return f.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:np(i.bundledQuery),readTime:Gt(i.readTime)}}(n)),f.resolve()}};var na=class{constructor(){this.overlays=new z(I.comparator),this.hr=new Map}getOverlay(t,n){return f.resolve(this.overlays.get(n))}getOverlays(t,n){let r=Re();return f.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),f.resolve()}removeOverlaysForBatchId(t,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),f.resolve()}getOverlaysForCollection(t,n,r){let i=Re(),s=n.length+1,o=new I(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return f.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new z((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Re(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Re(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return f.resolve(a)}ht(t,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Bo(n,r));let s=this.hr.get(n);s===void 0&&(s=P(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var dr=class{constructor(){this.Pr=new ht(Q.Ir),this.Tr=new ht(Q.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let r=new Q(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Q(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){let n=new I(new q([])),r=new Q(n,t),i=new Q(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new I(new q([])),r=new Q(n,t),i=new Q(n,t+1),s=P();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){let n=new Q(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}},Q=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return I.comparator(t.key,n.key)||V(t.pr,n.pr)}static Er(t,n){return V(t.pr,n.pr)||I.comparator(t.key,n.key)}};var ra=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ht(Q.Ir)}checkEmpty(t){return f.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Lo(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Q(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return f.resolve(o)}lookupMutationBatch(t,n){return f.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let r=n+1,i=this.br(r),s=i<0?0:i;return f.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return f.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return f.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let r=new Q(n,0),i=new Q(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),f.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ht(V);return n.forEach(i=>{let s=new Q(i,0),o=new Q(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),f.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){let r=n.path,i=r.length+1,s=r;I.isDocumentKey(s)||(s=s.child(""));let o=new Q(new I(s),0),a=new ht(V);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),f.resolve(this.Dr(a))}Dr(t){let n=[];return t.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){O(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return f.forEach(n.mutations,i=>{let s=new Q(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){let r=new Q(n,0),i=this.wr.firstAfterOrEqual(r);return f.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,f.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ia=class{constructor(t){this.vr=t,this.docs=function(){return new z(I.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let r=this.docs.get(n);return f.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(t,n){let r=Jt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pt.newInvalidDocument(i))}),f.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Jt(),o=n.path,a=new I(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mf(df(l),r)<=0||(i.has(l.key)||Hi(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return f.resolve(s)}getAllFromCollectionGroup(t,n,r,i){E()}Fr(t,n){return f.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new sa(this)}getSize(t){return f.resolve(this.size)}},sa=class extends Jo{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),f.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var oa=class{constructor(t){this.persistence=t,this.Mr=new fe(n=>Ya(n),Xa),this.lastRemoteSnapshotVersion=C.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dr,this.targetCount=0,this.Br=hr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),f.resolve()}getLastRemoteSnapshotVersion(t){return f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return f.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),f.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),f.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Br=new hr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,f.resolve()}updateTargetData(t,n){return this.qn(n),f.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,f.resolve()}removeTargets(t,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),f.waitFor(s).next(()=>i)}getTargetCount(t){return f.resolve(this.targetCount)}getTargetData(t,n){let r=this.Mr.get(n)||null;return f.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),f.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),f.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),f.resolve()}getMatchingKeysForTargetId(t,n){let r=this.Nr.gr(n);return f.resolve(r)}containsKey(t,n){return f.resolve(this.Nr.containsKey(n))}};var aa=class{constructor(t,n){this.Lr={},this.overlays={},this.kr=new vh(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new oa(this),this.indexManager=new Yo,this.remoteDocumentCache=function(i){return new ia(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ho(n),this.$r=new ea(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new na,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new ra(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){_("MemoryPersistence","Starting transaction:",t);let i=new ca(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return f.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}},ca=class extends _o{constructor(t){super(),this.currentSequenceNumber=t}},ua=class e{constructor(t){this.persistence=t,this.zr=new dr,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw E()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),f.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),f.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),f.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return f.forEach(this.Jr,r=>{let i=I.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,C.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return f.or([()=>f.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var la=class e{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=P(),i=P();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e(t,n.fromCache,r,i)}};var ha=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var da=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Kc()?8:vi.v(xn())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){let s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ha;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(Zn()<=Wt.DEBUG&&_("QueryEngine","SDK will not create cache indexes for query:",tn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),f.resolve()):(Zn()<=Wt.DEBUG&&_("QueryEngine","Query:",tn(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Zn()<=Wt.DEBUG&&_("QueryEngine","The SDK decides to create cache indexes for query:",tn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zt(n))):f.resolve())}ji(t,n){if(Yl(n))return f.resolve(null);let r=zt(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=No(n,null,"F"),r=zt(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{let o=P(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(t,No(n,null,"F")):this.es(t,u,n,c)}))})))}Hi(t,n,r,i){return Yl(n)||i.isEqual(C.min())?f.resolve(null):this.zi.getDocuments(t,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?f.resolve(null):(Zn()<=Wt.DEBUG&&_("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tn(n)),this.es(t,o,n,hf(i,-1)).next(a=>a))})}Zi(t,n){let r=new ht(Rh(t));return n.forEach((i,s)=>{Hi(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;let s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return Zn()<=Wt.DEBUG&&_("QueryEngine","Using full collection scan to execute query:",tn(n)),this.zi.getDocumentsMatchingQuery(t,n,Ne.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ma=class{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new z(V),this.rs=new fe(s=>Ya(s),Xa),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ta(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function rp(e,t,n,r){return new ma(e,t,n,r)}function Yh(e,t){return v(this,null,function*(){let n=S(e);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=P();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function ip(e,t){let n=S(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let h=u.batch,m=h.keys(),p=f.resolve();return m.forEach(x=>{p=p.next(()=>l.getEntry(c,x)).next(A=>{let w=u.docVersions.get(x);O(w!==null),A.version.compareTo(w)<0&&(h.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),l.addEntry(A)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=P();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Xh(e){let t=S(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function sp(e,t){let n=S(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];t.targetChanges.forEach((l,h)=>{let m=i.get(h);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(ft.EMPTY_BYTE_STRING,C.min()).withLastLimboFreeSnapshotVersion(C.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(h,p),function(A,w,M){return A.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,p,l)&&a.push(n.Qr.updateTargetData(s,p))});let c=Jt(),u=P();if(t.documentUpdates.forEach(l=>{t.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(op(s,o,t.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(C.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return f.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function op(e,t,n){let r=P(),i=P();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Jt();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(C.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):_("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function ap(e,t){let n=S(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function cp(e,t){let n=S(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,f.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new lr(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}function fa(e,t,n){return v(this,null,function*(){let r=S(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yr(o))throw o;_("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)})}function ah(e,t,n){let r=S(e),i=C.min(),s=P();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let h=S(c),m=h.rs.get(l);return m!==void 0?f.resolve(h.ns.get(m)):h.Qr.getTargetData(u,l)}(r,o,zt(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:C.min(),n?s:P())).next(a=>(up(r,bf(t),a),{documents:a,hs:s})))}function up(e,t,n){let r=e.ss.get(t)||C.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}var Ri=class{constructor(){this.activeTargetIds=Rf()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var pa=class{constructor(){this.no=new Ri,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ri,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var ga=class{io(t){}shutdown(){}};var Di=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mi=null;function so(){return mi===null?mi=function(){return 268435456+Math.round(2147483648*Math.random())}():mi++,"0x"+mi.toString(16)}var lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _a=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var lt="WebChannelConnection",ya=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=so(),c=this.bo(n,r.toUriEncodedString());_("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(_("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw an("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wn}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=lp[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){let s=so();return new Promise((o,a)=>{let c=new Ll;c.setWithCredentials(!0),c.listenOnce(Ol.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case hi.NO_ERROR:let l=c.getResponseJson();_(lt,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(l)),o(l);break;case hi.TIMEOUT:_(lt,`RPC '${t}' ${s} timed out`),a(new y(d.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:let h=c.getStatus();if(_(lt,`RPC '${t}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let p=m?.error;if(p&&p.status&&p.message){let x=function(w){let M=w.toLowerCase().replace(/_/g,"-");return Object.values(d).indexOf(M)>=0?M:d.UNKNOWN}(p.status);a(new y(x,p.message))}else a(new y(d.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new y(d.UNAVAILABLE,"Connection failed."));break;default:E()}}finally{_(lt,`RPC '${t}' ${s} completed.`)}});let u=JSON.stringify(i);_(lt,`RPC '${t}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(t,n,r){let i=so(),s=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ml(),a=Nl(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");_(lt,`Creating RPC '${t}' stream ${i}: ${l}`,c);let h=o.createWebChannel(l,c),m=!1,p=!1,x=new _a({lo:w=>{p?_(lt,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(m||(_(lt,`Opening RPC '${t}' stream ${i} transport.`),h.open(),m=!0),_(lt,`RPC '${t}' stream ${i} sending:`,w),h.send(w))},ho:()=>h.close()}),A=(w,M,G)=>{w.listen(M,it=>{try{G(it)}catch(vt){setTimeout(()=>{throw vt},0)}})};return A(h,Jn.EventType.OPEN,()=>{p||_(lt,`RPC '${t}' stream ${i} transport opened.`)}),A(h,Jn.EventType.CLOSE,()=>{p||(p=!0,_(lt,`RPC '${t}' stream ${i} transport closed`),x.Vo())}),A(h,Jn.EventType.ERROR,w=>{p||(p=!0,an(lt,`RPC '${t}' stream ${i} transport errored:`,w),x.Vo(new y(d.UNAVAILABLE,"The operation could not be completed")))}),A(h,Jn.EventType.MESSAGE,w=>{var M;if(!p){let G=w.data[0];O(!!G);let it=G,vt=it.error||((M=it[0])===null||M===void 0?void 0:M.error);if(vt){_(lt,`RPC '${t}' stream ${i} received error:`,vt);let _e=vt.status,pt=function(Xd){let gc=K[Xd];if(gc!==void 0)return zh(gc)}(_e),Ge=vt.message;pt===void 0&&(pt=d.INTERNAL,Ge="Unknown error status: "+_e+" with message "+vt.message),p=!0,x.Vo(new y(pt,Ge)),h.close()}else _(lt,`RPC '${t}' stream ${i} received:`,G),x.mo(G)}}),A(a,Fl.STAT_EVENT,w=>{w.stat===ro.PROXY?_(lt,`RPC '${t}' stream ${i} detected buffering proxy`):w.stat===ro.NOPROXY&&_(lt,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.Ro()},0),x}};function oo(){return typeof document<"u"?document:null}function Yi(e){return new jo(e,!0)}var Vi=class{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&_("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var ki=class{constructor(t,n,r,i,s,o,a,c){this.oi=t,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Vi(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return v(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return v(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,n){return v(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===d.RESOURCE_EXHAUSTED?(jt(n.toString()),jt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===d.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{let i=new y(d.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){let r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>v(this,null,function*(){this.state=0,this.start()}))}__(t){return _("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},va=class extends ki{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();let n=$f(this.serializer,t),r=function(s){if(!("targetChange"in s))return C.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?C.min():o.readTime?Gt(o.readTime):C.min()}(t);return this.listener.u_(n,r)}c_(t){let n={};n.database=Wo(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=ko(c)?{documents:Wf(s,c)}:{query:Hf(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Gh(s,o.resumeToken);let u=$o(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(C.min())>0){a.readTime=xi(s,o.snapshotVersion.toTimestamp());let u=$o(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);let r=Xf(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){let n={};n.database=Wo(this.serializer),n.removeTarget=t,this.t_(n)}},wa=class extends ki{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(O(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let n=Qf(t.writeResults,t.commitTime),r=Gt(t.commitTime);return this.listener.T_(r,n)}return O(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=Wo(this.serializer),this.t_(t)}I_(t){let n={streamToken:this.lastStreamToken,writes:t.map(r=>Kf(this.serializer,r))};this.t_(n)}};var Ia=class extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new y(d.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,Ko(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===d.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new y(d.UNKNOWN,s.toString())})}vo(t,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,Ko(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===d.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new y(d.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Ta=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(jt(n),this.g_=!1):_("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Ea=class{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Ue(this)&&(_("RemoteStore","Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let u=S(c);u.v_.add(4),yield vr(u),u.x_.set("Unknown"),u.v_.delete(4),yield Xi(u)})}(this))}))}),this.x_=new Ta(r,i)}};function Xi(e){return v(this,null,function*(){if(Ue(e))for(let t of e.F_)yield t(!0)})}function vr(e){return v(this,null,function*(){for(let t of e.F_)yield t(!1)})}function Jh(e,t){let n=S(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),nc(n)?ec(n):Tn(n).Jo()&&tc(n,t))}function Zh(e,t){let n=S(e),r=Tn(n);n.C_.delete(t),r.Jo()&&td(n,t),n.C_.size===0&&(r.Jo()?r.Xo():Ue(n)&&n.x_.set("Unknown"))}function tc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(C.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tn(e).c_(t)}function td(e,t){e.O_.Oe(t),Tn(e).l_(t)}function ec(e){e.O_=new Go({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Tn(e).start(),e.x_.p_()}function nc(e){return Ue(e)&&!Tn(e).Ho()&&e.C_.size>0}function Ue(e){return S(e).v_.size===0}function ed(e){e.O_=void 0}function hp(e){return v(this,null,function*(){e.C_.forEach((t,n)=>{tc(e,t)})})}function dp(e,t){return v(this,null,function*(){ed(e),nc(e)?(e.x_.S_(t),ec(e)):e.x_.set("Unknown")})}function mp(e,t,n){return v(this,null,function*(){if(e.x_.set("Online"),t instanceof Ci&&t.state===2&&t.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(e,t)}catch(r){_("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield Mi(e,r)}else if(t instanceof sn?e.O_.$e(t):t instanceof Ai?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(C.min()))try{let r=yield Xh(e.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(ft.EMPTY_BYTE_STRING,l.snapshotVersion)),td(s,c);let h=new lr(l.target,c,u,l.sequenceNumber);tc(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(r){_("RemoteStore","Failed to raise snapshot:",r),yield Mi(e,r)}})}function Mi(e,t,n){return v(this,null,function*(){if(!yr(t))throw t;e.v_.add(1),yield vr(e),e.x_.set("Offline"),n||(n=()=>Xh(e.localStore)),e.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){_("RemoteStore","Retrying IndexedDB access"),yield n(),e.v_.delete(1),yield Xi(e)}))})}function nd(e,t){return t().catch(n=>Mi(e,n,t))}function Ji(e){return v(this,null,function*(){let t=S(e),n=pe(t),r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;fp(t);)try{let i=yield ap(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,pp(t,i)}catch(i){yield Mi(t,i)}rd(t)&&id(t)})}function fp(e){return Ue(e)&&e.D_.length<10}function pp(e,t){e.D_.push(t);let n=pe(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function rd(e){return Ue(e)&&!pe(e).Ho()&&e.D_.length>0}function id(e){pe(e).start()}function gp(e){return v(this,null,function*(){pe(e).d_()})}function _p(e){return v(this,null,function*(){let t=pe(e);for(let n of e.D_)t.I_(n.mutations)})}function yp(e,t,n){return v(this,null,function*(){let r=e.D_.shift(),i=qo.from(r,t,n);yield nd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Ji(e)})}function vp(e,t){return v(this,null,function*(){t&&pe(e).P_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return Ff(o)&&o!==d.ABORTED}(i.code)){let s=r.D_.shift();pe(r).Zo(),yield nd(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ji(r)}})}(e,t)),rd(e)&&id(e)})}function ch(e,t){return v(this,null,function*(){let n=S(e);n.asyncQueue.verifyOperationInProgress(),_("RemoteStore","RemoteStore received new credentials");let r=Ue(n);n.v_.add(3),yield vr(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),yield Xi(n)})}function wp(e,t){return v(this,null,function*(){let n=S(e);t?(n.v_.delete(2),yield Xi(n)):t||(n.v_.add(2),yield vr(n),n.x_.set("Unknown"))})}function Tn(e){return e.N_||(e.N_=function(n,r,i){let s=S(n);return s.R_(),new va(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:hp.bind(null,e),To:dp.bind(null,e),u_:mp.bind(null,e)}),e.F_.push(t=>v(this,null,function*(){t?(e.N_.Zo(),nc(e)?ec(e):e.x_.set("Unknown")):(yield e.N_.stop(),ed(e))}))),e.N_}function pe(e){return e.B_||(e.B_=function(n,r,i){let s=S(n);return s.R_(),new wa(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:gp.bind(null,e),To:vp.bind(null,e),E_:_p.bind(null,e),T_:yp.bind(null,e)}),e.F_.push(t=>v(this,null,function*(){t?(e.B_.Zo(),yield Ji(e)):(yield e.B_.stop(),e.D_.length>0&&(_("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}var ba=class e{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){let o=Date.now()+r,a=new e(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new y(d.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function rc(e,t){if(jt("AsyncQueue",`${t}: ${e}`),yr(e))return new y(d.UNAVAILABLE,`${t}: ${e}`);throw e}var Ni=class e{constructor(t){this.comparator=t?(n,r)=>t(n,r)||I.comparator(n.key,r.key):(n,r)=>I.comparator(n.key,r.key),this.keyedMap=tr(),this.sortedSet=new z(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}};var Oi=class{constructor(){this.L_=new z(I.comparator)}track(t){let n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):E():this.L_=this.L_.insert(n,t)}k_(){let t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}},_n=class e{constructor(t,n,r,i,s,o,a,c,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new e(t,n,Ni.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Aa=class{constructor(){this.q_=void 0,this.Q_=[]}},Ca=class{constructor(){this.queries=new fe(t=>Ph(t),Wi),this.onlineState="Unknown",this.K_=new Set}};function Ip(e,t){return v(this,null,function*(){let n=S(e),r=t.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Aa),i)try{s.q_=yield n.onListen(r)}catch(o){let a=rc(o,`Initialization of query '${tn(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&ic(n)})}function Tp(e,t){return v(this,null,function*(){let n=S(e),r=t.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(t);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function Ep(e,t){let n=S(e),r=!1;for(let i of t){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&ic(n)}function bp(e,t,n){let r=S(e),i=r.queries.get(t);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(t)}function ic(e){e.K_.forEach(t=>{t.next()})}var Sa=class{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){let r=[];for(let i of t.docChanges)i.type!==3&&r.push(i);t=new _n(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=_n.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}};var Fi=class{constructor(t){this.key=t}},Li=class{constructor(t){this.key=t}},xa=class{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=P(),this.mutatedKeys=P(),this.ua=Rh(t),this.ca=new Ni(this.ua)}get la(){return this.oa}ha(t,n){let r=n?n.Pa:new Oi,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((l,h)=>{let m=i.get(l),p=Hi(this.query,h)?h:null,x=!!m&&this.mutatedKeys.has(m.key),A=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;m&&p?m.data.isEqual(p.data)?x!==A&&(r.track({type:3,doc:p}),w=!0):this.Ia(m,p)||(r.track({type:2,doc:p}),w=!0,(c&&this.ua(p,c)>0||u&&this.ua(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),w=!0):m&&!p&&(r.track({type:1,doc:m}),w=!0,(c||u)&&(a=!0)),w&&(p?(o=o.add(p),s=A?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){let s=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;let o=t.Pa.k_();o.sort((l,h)=>function(p,x){let A=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return E()}};return A(p)-A(x)}(l.type,h.type)||this.ua(l.doc,h.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,o.length!==0||u?{snapshot:new _n(this.query,t.ca,s,o,t.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Oi,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];let t=this.aa;this.aa=P(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new Li(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Fi(r))}),n}Ra(t){this.oa=t.hs,this.aa=P();let n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return _n.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Pa=class{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}},Ra=class{constructor(t){this.key=t,this.ma=!1}},Da=class{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new fe(a=>Ph(a),Wi),this.pa=new Map,this.ya=new Set,this.wa=new z(I.comparator),this.Sa=new Map,this.ba=new dr,this.Da={},this.Ca=new Map,this.va=hr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function Ap(e,t){return v(this,null,function*(){let n=Np(e),r,i,s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield cp(n.localStore,zt(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield Cp(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Jh(n.remoteStore,o)}return i})}function Cp(e,t,n,r,i){return v(this,null,function*(){e.Ma=(h,m,p)=>function(A,w,M,G){return v(this,null,function*(){let it=w.view.ha(M);it.Xi&&(it=yield ah(A.localStore,w.query,!1).then(({documents:Ge})=>w.view.ha(Ge,it)));let vt=G&&G.targetChanges.get(w.targetId),_e=G&&G.targetMismatches.get(w.targetId)!=null,pt=w.view.applyChanges(it,A.isPrimaryClient,vt,_e);return lh(A,w.targetId,pt.da),pt.snapshot})}(e,h,m,p);let s=yield ah(e.localStore,t,!0),o=new xa(t,s.hs),a=o.ha(s.documents),c=ur.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,c);lh(e,n,u.da);let l=new Pa(t,n,o);return e.ga.set(t,l),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot})}function Sp(e,t){return v(this,null,function*(){let n=S(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Wi(s,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Zh(n.remoteStore,r.targetId),Va(n,r.targetId)}).catch(_r))):(Va(n,r.targetId),yield fa(n.localStore,r.targetId,!0))})}function xp(e,t,n){return v(this,null,function*(){let r=Op(e);try{let i=yield function(o,a){let c=S(o),u=H.now(),l=a.reduce((p,x)=>p.add(x.key),P()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=Jt(),A=P();return c.os.getEntries(p,l).next(w=>{x=w,x.forEach((M,G)=>{G.isValidDocument()||(A=A.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,x)).next(w=>{h=w;let M=[];for(let G of a){let it=Of(G,h.get(G.key).overlayedDocument);it!=null&&M.push(new Zt(G.key,it,Th(it.value.mapValue),Xt.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,M,a)}).next(w=>{m=w;let M=w.applyToLocalDocumentSet(h,A);return c.documentOverlayCache.saveOverlays(p,w.batchId,M)})}).then(()=>({batchId:m.batchId,changes:Vh(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Da[o.currentUser.toKey()];u||(u=new z(V)),u=u.insert(a,c),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),yield wr(r,i.changes),yield Ji(r.remoteStore)}catch(i){let s=rc(i,"Failed to persist write");n.reject(s)}})}function sd(e,t){return v(this,null,function*(){let n=S(e);try{let r=yield sp(n.localStore,t);t.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(O(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?O(o.ma):i.removedDocuments.size>0&&(O(o.ma),o.ma=!1))}),yield wr(n,r,t)}catch(r){yield _r(r)}})}function uh(e,t,n){let r=S(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=S(o);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(let m of h.Q_)m.U_(a)&&(u=!0)}),u&&ic(c)}(r.eventManager,t),i.length&&r.fa.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Pp(e,t,n){return v(this,null,function*(){let r=S(e);r.sharedClientState.updateQueryState(t,"rejected",n);let i=r.Sa.get(t),s=i&&i.key;if(s){let o=new z(I.comparator);o=o.insert(s,Pt.newNoDocument(s,C.min()));let a=P().add(s),c=new bi(C.min(),new Map,new z(V),o,a);yield sd(r,c),r.wa=r.wa.remove(s),r.Sa.delete(t),sc(r)}else yield fa(r.localStore,t,!1).then(()=>Va(r,t,n)).catch(_r)})}function Rp(e,t){return v(this,null,function*(){let n=S(e),r=t.batch.batchId;try{let i=yield ip(n.localStore,t);ad(n,r,null),od(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield wr(n,i)}catch(i){yield _r(i)}})}function Dp(e,t,n){return v(this,null,function*(){let r=S(e);try{let i=yield function(o,a){let c=S(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(O(h!==null),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,t);ad(r,t,n),od(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield wr(r,i)}catch(i){yield _r(i)}})}function od(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function ad(e,t,n){let r=S(e),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Va(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||cd(e,r)})}function cd(e,t){e.ya.delete(t.path.canonicalString());let n=e.wa.get(t);n!==null&&(Zh(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),sc(e))}function lh(e,t,n){for(let r of n)r instanceof Fi?(e.ba.addReference(r.key,t),Vp(e,r)):r instanceof Li?(_("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||cd(e,r.key)):E()}function Vp(e,t){let n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(_("SyncEngine","New document in limbo: "+n),e.ya.add(r),sc(e))}function sc(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){let t=e.ya.values().next().value;e.ya.delete(t);let n=new I(q.fromString(t)),r=e.va.next();e.Sa.set(r,new Ra(n)),e.wa=e.wa.insert(n,r),Jh(e.remoteStore,new lr(zt(Ja(n.path)),r,"TargetPurposeLimboResolution",vh._e))}}function wr(e,t,n){return v(this,null,function*(){let r=S(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,t,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=la.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,u){return v(this,null,function*(){let l=S(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>f.forEach(u,m=>f.forEach(m.qi,p=>l.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>f.forEach(m.Qi,p=>l.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!yr(h))throw h;_("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let m=h.targetId;if(!h.fromCache){let p=l.ns.get(m),x=p.snapshotVersion,A=p.withLastLimboFreeSnapshotVersion(x);l.ns=l.ns.insert(m,A)}}})}(r.localStore,s))})}function kp(e,t){return v(this,null,function*(){let n=S(e);if(!n.currentUser.isEqual(t)){_("SyncEngine","User change. New user:",t.toKey());let r=yield Yh(n.localStore,t);n.currentUser=t,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new y(d.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield wr(n,r.us)}})}function Mp(e,t){let n=S(e),r=n.Sa.get(t);if(r&&r.ma)return P().add(r.key);{let i=P(),s=n.pa.get(t);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function Np(e){let t=S(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pp.bind(null,t),t.fa.u_=Ep.bind(null,t.eventManager),t.fa.xa=bp.bind(null,t.eventManager),t}function Op(e){let t=S(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dp.bind(null,t),t}var qi=class{constructor(){this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Yi(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return rp(this.persistence,new da,t.initialUser,this.serializer)}createPersistence(t){return new aa(ua.Hr,this.serializer)}createSharedClientState(t){return new pa}terminate(){return v(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ka=class{initialize(t,n){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kp.bind(null,this.syncEngine),yield wp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ca}()}createDatastore(t){let n=Yi(t.databaseInfo.databaseId),r=function(s){return new ya(s)}(t.databaseInfo);return function(s,o,a,c){return new Ia(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Ea(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>uh(this.syncEngine,n,0),function(){return Di.D()?new Di:new ga}())}createSyncEngine(t,n){return function(i,s,o,a,c,u,l){let h=new Da(i,s,o,a,c,u);return l&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return v(this,null,function*(){var t;yield function(r){return v(this,null,function*(){let i=S(r);_("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield vr(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Ma=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):jt("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var Na=class{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=_i.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>v(this,null,function*(){_("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(_("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new y(d.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let r=rc(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}};function ao(e,t){return v(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),_("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield Yh(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function hh(e,t){return v(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield Lp(e);_("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ch(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ch(t.remoteStore,i)),e._onlineComponents=t})}function Fp(e){return e.name==="FirebaseError"?e.code===d.FAILED_PRECONDITION||e.code===d.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function Lp(e){return v(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ao(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!Fp(n))throw n;an("Error using user provided cache. Falling back to memory cache: "+n),yield ao(e,new qi)}}else _("FirestoreClient","Using default OfflineComponentProvider"),yield ao(e,new qi);return e._offlineComponents})}function ud(e){return v(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(_("FirestoreClient","Using user provided OnlineComponentProvider"),yield hh(e,e._uninitializedComponentsProvider._online)):(_("FirestoreClient","Using default OnlineComponentProvider"),yield hh(e,new ka))),e._onlineComponents})}function qp(e){return ud(e).then(t=>t.syncEngine)}function dh(e){return v(this,null,function*(){let t=yield ud(e),n=t.eventManager;return n.onListen=Ap.bind(null,t.syncEngine),n.onUnlisten=Sp.bind(null,t.syncEngine),n})}function ld(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var mh=new Map;function hd(e,t,n){if(!n)throw new y(d.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bp(e,t,n,r){if(t===!0&&r===!0)throw new y(d.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function fh(e){if(!I.isDocumentKey(e))throw new y(d.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ph(e){if(I.isDocumentKey(e))throw new y(d.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zi(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":E()}function le(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new y(d.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Zi(e);throw new y(d.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var Bi=class{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new y(d.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new y(d.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Bp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ld((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new y(d.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new y(d.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new y(d.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},yn=class{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bi({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new y(d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new y(d.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bi(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new co;switch(r.type){case"firstParty":return new mo(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new y(d.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=mh.get(n);r&&(_("ComponentProvider","Removing Datastore"),mh.delete(n),r.terminate())}(this),Promise.resolve()}};function dd(e,t,n,r={}){var i;let s=(e=le(e,yn))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&an("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=rt.MOCK_USER;else{a=$c(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new y(d.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new rt(u)}e._authCredentials=new uo(new gi(a,c))}}var vn=class e{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},yt=class e{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new he(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},he=class e extends vn{constructor(t,n,r){super(t,n,Ja(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new yt(this.firestore,null,new I(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function ts(e,t,...n){if(e=se(e),hd("collection","path",t),e instanceof yn){let r=q.fromString(t,...n);return ph(r),new he(e,null,r)}{if(!(e instanceof yt||e instanceof he))throw new y(d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(q.fromString(t,...n));return ph(r),new he(e.firestore,null,r)}}function oc(e,t,...n){if(e=se(e),arguments.length===1&&(t=_i.newId()),hd("doc","path",t),e instanceof yn){let r=q.fromString(t,...n);return fh(r),new yt(e,null,new I(r))}{if(!(e instanceof yt||e instanceof he))throw new y(d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(q.fromString(t,...n));return fh(r),new yt(e.firestore,e instanceof he?e.converter:null,new I(r))}}var Oa=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Vi(this,"async_queue_retry"),this._u=()=>{let n=oo();n&&_("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let t=oo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;let n=oo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});let n=new Bt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}cu(){return v(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!yr(t))throw t;_("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(t){let n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw jt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);let i=ba.createAndSchedule(this,t,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&E()}verifyOperationInProgress(){}hu(){return v(this,null,function*(){let t;do t=this.Xa,yield t;while(t!==this.Xa)})}Pu(t){for(let n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){let n=this.nu.indexOf(t);this.nu.splice(n,1)}};function gh(e){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(e,["next","error","complete"])}var ge=class extends yn{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Oa}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pd(this),this._firestoreClient.terminate()}};function md(e,t){let n=typeof e=="object"?e:tu(),r=typeof e=="string"?e:t||"(default)",i=Jc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=jc("firestore");s&&dd(i,...s)}return i}function fd(e){return e._firestoreClient||pd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pd(e){var t,n,r;let i=e._freezeSettings(),s=function(a,c,u,l){return new Io(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ld(l.experimentalLongPollingOptions),l.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Na(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var mr=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(ft.fromBase64String(t))}catch(n){throw new y(d.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(ft.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var fr=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new y(d.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Ui=class{constructor(t){this._methodName=t}};var pr=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new y(d.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new y(d.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return V(this._lat,t._lat)||V(this._long,t._long)}};var Up=/^__.*__$/,Fa=class{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Zt(t,this.data,this.fieldMask,n,this.fieldTransforms):new Be(t,this.data,n,this.fieldTransforms)}};function gd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw E()}}var La=class e{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Au({path:r,Vu:!1});return i.mu(t),i}fu(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return zi(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(gd(this.du)&&Up.test(t))throw this.pu('Document fields cannot begin and end with "__"')}},qa=class{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Yi(t)}Su(t,n,r,i=!1){return new La({du:t,methodName:n,wu:r,path:Et.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ac(e){let t=e._freezeSettings(),n=Yi(e._databaseId);return new qa(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _d(e,t,n,r,i,s={}){let o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);wd("Data must be an object, but it was:",o,r);let a=yd(r,o),c,u;if(s.merge)c=new qt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let h of s.mergeFields){let m=Gp(t,h,n);if(!o.contains(m))throw new y(d.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$p(l,m)||l.push(m)}c=new qt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Fa(new xt(a),c,u)}function zp(e,t,n,r=!1){return cc(n,e.Su(r?4:3,t))}function cc(e,t){if(vd(e=se(e)))return wd("Unsupported field value:",t,e),yd(e,t);if(e instanceof Ui)return function(r,i){if(!gd(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=cc(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Df(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=H.fromDate(r);return{timestampValue:xi(i.serializer,s)}}if(r instanceof H){let s=new H(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xi(i.serializer,s)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mr)return{bytesValue:Gh(i.serializer,r._byteString)};if(r instanceof yt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Za(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Zi(r)}`)}(e,t)}function yd(e,t){let n={};return wh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):In(e,(r,i)=>{let s=cc(i,t.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vd(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof H||e instanceof pr||e instanceof mr||e instanceof yt||e instanceof Ui)}function wd(e,t,n){if(!vd(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Zi(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Gp(e,t,n){if((t=se(t))instanceof fr)return t._internalPath;if(typeof t=="string")return Id(e,t);throw zi("Field path arguments must be of type string or ",e,!1,void 0,n)}var jp=new RegExp("[~\\*/\\[\\]]");function Id(e,t,n){if(t.search(jp)>=0)throw zi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new fr(...t.split("."))._internalPath}catch{throw zi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zi(e,t,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new y(d.INVALID_ARGUMENT,a+e+c)}function $p(e,t){return e.some(n=>n.isEqual(t))}var Gi=class{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Ba(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(uc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ba=class extends Gi{data(){return super.data()}};function uc(e,t){return typeof t=="string"?Id(e,t):t instanceof fr?t._internalPath:t._delegate._internalPath}function Kp(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new y(d.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gr=class{},Ua=class extends gr{};function es(e,t,...n){let r=[];t instanceof gr&&r.push(t),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof za).length,a=s.filter(c=>c instanceof ji).length;if(o>1||o>0&&a>0)throw new y(d.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)e=i._apply(e);return e}var ji=class e extends Ua{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new e(t,n,r)}_apply(t){let n=this._parse(t);return Ed(t._query,n),new vn(t.firestore,t.converter,Mo(t._query,n))}_parse(t){let n=ac(t.firestore);return function(s,o,a,c,u,l,h){let m;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new y(d.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){yh(h,l);let p=[];for(let x of h)p.push(_h(c,s,x));m={arrayValue:{values:p}}}else m=_h(c,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||yh(h,l),m=zp(a,o,h,l==="in"||l==="not-in");return W.create(u,l,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};function Td(e,t,n){let r=t,i=uc("where",e);return ji._create(i,r,n)}var za=class e extends gr{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rt.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Ed(o,c),o=Mo(o,c)}(t._query,n),new vn(t.firestore,t.converter,Mo(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function _h(e,t,n){if(typeof(n=se(n))=="string"){if(n==="")throw new y(d.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xh(t)&&n.indexOf("/")!==-1)throw new y(d.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(q.fromString(n));if(!I.isDocumentKey(r))throw new y(d.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jl(e,new I(r))}if(n instanceof yt)return jl(e,n._key);throw new y(d.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zi(n)}.`)}function yh(e,t){if(!Array.isArray(e)||e.length===0)throw new y(d.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ed(e,t){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new y(d.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new y(d.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Ga=class{convertValue(t,n="none"){switch(Oe(t)){case 0:return null;case 1:return t.booleanValue;case 2:return U(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(me(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw E()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let r={};return In(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new pr(U(t.latitude),U(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":let r=Wa(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(or(t));default:return null}}convertTimestamp(t){let n=de(t);return new H(n.seconds,n.nanos)}convertDocumentKey(t,n){let r=q.fromString(t);O(Hh(r));let i=new Ti(r.get(1),r.get(3)),s=new I(r.popFirst(5));return i.isEqual(n)||jt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function bd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Ve=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},$i=class extends Gi{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new on(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let r=this._document.data.field(uc("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},on=class extends $i{data(t={}){return super.data(t)}},ja=class{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ve(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new on(this._firestore,this._userDataWriter,r.key,r,new Ve(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new y(d.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new on(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ve(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new on(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ve(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:Qp(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Qp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return E()}}var Ki=class extends Ga{constructor(t){super(),this.firestore=t}convertBytes(t){return new mr(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function Ad(e,t,n){e=le(e,yt);let r=le(e.firestore,ge),i=bd(e.converter,t,n);return hc(r,[_d(ac(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Xt.none())])}function Cd(e){return hc(le(e.firestore,ge),[new cr(e._key,Xt.none())])}function Sd(e,t){let n=le(e.firestore,ge),r=oc(e),i=bd(e.converter,t);return hc(n,[_d(ac(e.firestore),"addDoc",r._key,i,e.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function lc(e,...t){var n,r,i;e=se(e);let s={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||gh(t[o])||(s=t[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(gh(t[o])){let h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,l;if(e instanceof yt)u=le(e.firestore,ge),l=Ja(e._key.path),c={next:h=>{t[o]&&t[o](Wp(u,e,h))},error:t[o+1],complete:t[o+2]};else{let h=le(e,vn);u=le(h.firestore,ge),l=h._query;let m=new Ki(u);c={next:p=>{t[o]&&t[o](new ja(u,m,h,p))},error:t[o+1],complete:t[o+2]},Kp(e._query)}return function(m,p,x,A){let w=new Ma(A),M=new Sa(p,w,x);return m.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Ip(yield dh(m),M)})),()=>{w.La(),m.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Tp(yield dh(m),M)}))}}(fd(u),l,a,c)}function hc(e,t){return function(r,i){let s=new Bt;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return xp(yield qp(r),i,s)})),s.promise}(fd(e),t)}function Wp(e,t,n){let r=n.docs.get(t._key),i=new Ki(e);return new $i(e,i,t._key,r,new Ve(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(i){wn=i})(Zc),Xc(new Hc("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ge(new lo(r.getProvider("auth-internal")),new po(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new y(d.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ti(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pn(Bl,"4.4.3",t),Pn(Bl,"4.4.3","esm2017")})();var ns=function(){return ns=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ns.apply(this,arguments)};var Xp={includeMetadataChanges:!1};function xd(e,t){return t===void 0&&(t=Xp),new Tr(function(n){var r=lc(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Pd(e,t){var n;t===void 0&&(t={});var r=e.data(t);return!e.exists()||typeof r!="object"||r===null||!t.idField?r:ns(ns({},r),(n={},n[t.idField]=e.id,n))}function Rd(e){return xd(e,{includeMetadataChanges:!0}).pipe(os(function(t){return t.docs}))}function Dd(e,t){return t===void 0&&(t={}),Rd(e).pipe(os(function(n){return n.map(function(r){return Pd(r,t)})}))}var ze=class{constructor(t){return t}},Vd="firestore",dc=class{constructor(){return ru(Vd)}};var mc=new we("angularfire2.firestore-instances");function Jp(e,t){let n=nu(Vd,e,t);return n&&new ze(n)}function Zp(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new ze(r)}}var tg={provide:dc,deps:[[new bn,mc]]},eg={provide:ze,useFactory:Jp,deps:[[new bn,mc],ou]},ng=(()=>{class e{constructor(){Pn("angularfire",eu.full,"fst")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Dt({type:e});static \u0275inj=kt({providers:[eg,tg]})}return e})();function pv(e,...t){return{ngModule:ng,providers:[{provide:mc,useFactory:Zp(e),multi:!0,deps:[Sc,Ac,su,au,[new bn,cu],[new bn,iu],...t]}]}}var fc=oe(Dd,!0);var kd=oe(Sd,!0);var Md=oe(Cd,!0);var pc=oe(oc,!0);var gv=oe(md,!0);var Nd=oe(Ad,!0);var rs=oe(Td,!0);var is=(()=>{let t=class t{constructor(){this.firestore=Y(ze)}getUsers(){return fc(this.usersCollection,{idField:"id"})}getThoughts(r){let i=[rs("textContent",">=",r),rs("textContent","<=",r+"\uF8FF")];r?.charAt(0)==="@"&&(i=[rs("username",">=",r.slice(1)?.toLowerCase()??"")]);let s=r?es(this.thoughtsCollection,...i):es(this.thoughtsCollection);return fc(s,{idField:"id"}).pipe(Er(o=>yc(o.sort((c,u)=>u.timestamp.seconds-c.timestamp.seconds))))}addThought(r){return En(kd(this.thoughtsCollection,r).then(i=>i.id))}updateThought(r,i){return En(Nd(pc(this.firestore,"thoughts/"+r),i))}removeThought(r){return En(Md(pc(this.firestore,"thoughts/"+r)))}get usersCollection(){return ts(this.firestore,"users")}get thoughtsCollection(){return ts(this.firestore,"thoughts")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var rg=["*"];var ig=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],sg=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],og=new we("MAT_CARD_CONFIG"),Od=(()=>{let t=class t{constructor(r){this.appearance=r?.appearance||"raised"}};t.\u0275fac=function(i){return new(i||t)(J(og,8))},t.\u0275cmp=X({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,s){i&2&&ne("mat-mdc-card-outlined",s.appearance==="outlined")("mdc-card--outlined",s.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Z],ngContentSelectors:rg,decls:1,vars:0,template:function(i,s){i&1&&(Ie(),Mt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let e=t;return e})(),Fd=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=te({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0});let e=t;return e})();var Ld=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=te({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let e=t;return e})(),qd=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=te({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0});let e=t;return e})();var Bd=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=X({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[Z],ngContentSelectors:sg,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,s){i&1&&(Ie(ig),Mt(0),D(1,"div",0),Mt(2,1),N(),Mt(3,2))},encapsulation:2,changeDetection:0});let e=t;return e})();var Ud=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=te({type:t,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"],standalone:!0});let e=t;return e})();var zd=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Dt({type:t}),t.\u0275inj=kt({imports:[bt,_t,bt]});let e=t;return e})();var Gd=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=Dt({type:t}),t.\u0275inj=kt({imports:[bt,bt]});let e=t;return e})();var jd=(()=>{let t=class t{transform(r){let{thought:i,uid:s}=r;return i.likedBy.indexOf(s,0)>-1?"check_circle":"radio_button_unchecked"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=ee({name:"appCheckIcon",type:t,pure:!0,standalone:!0});let e=t;return e})();var $d=(()=>{let t=class t{transform(r){if(!r)return null;let i=new Date(r*1e3),s=i.getDate().toString().padStart(2,"0"),o=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getFullYear().toString();return`${s}/${o}/${a}`}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=ee({name:"appTimestamp",type:t,pure:!0,standalone:!0});let e=t;return e})();var Kd=(()=>{let t=class t{transform(r){return r.thought.userUid!==r.uid}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=ee({name:"appCheckOwner",type:t,pure:!0,standalone:!0});let e=t;return e})();var Qd=(()=>{let t=class t{transform(r){return r.index===parseInt(r.div?.id)?"close_fullscreen":"open_in_full"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=ee({name:"appChangeIcon",type:t,pure:!0,standalone:!0});let e=t;return e})();var ug=["cardcontainer"],lg=(e,t)=>t.id;function hg(e,t){if(e&1){let n=An();D(0,"button",14),It("click",function(){ye(n);let i=Qt().$implicit,s=Qt();return ve(s.removeThought(i.id))}),D(1,"mat-icon",15),at(2,"delete"),N()()}}var dg=(e,t)=>({uid:e,thought:t}),mg=(e,t)=>({index:e,div:t}),fg=(e,t)=>({thought:e,uid:t});function pg(e,t){if(e&1){let n=An();D(0,"div",0,1)(2,"mat-card",2)(3,"mat-card-content")(4,"textarea",3,4),It("blur",function(){let s=ye(n).$implicit,o=ls(5),a=Qt();return ve(a.changeThoughtContent(s,o.value))}),$e(6,"appCheckOwner"),at(7,"      "),N()(),wt(8,"span",5),D(9,"mat-card-header",6),wt(10,"div",7),D(11,"mat-card-title"),at(12),N(),D(13,"mat-card-subtitle"),at(14),$e(15,"appTimestamp"),N(),wt(16,"span",5),D(17,"button",8),It("click",function(){ye(n);let i=ls(1),s=Qt();return ve(s.expand(i))}),D(18,"mat-icon",9),at(19),$e(20,"appChangeIcon"),N()(),D(21,"button",10),It("click",function(){let s=ye(n).$implicit,o=Qt();return ve(o.changeThoughtLikes(s))}),D(22,"mat-icon",11),at(23),$e(24,"appCheckIcon"),N(),D(25,"span",12),at(26),N()(),Ar(27,hg,3,0,"button",13),N()()()}if(e&2){let n=t.$implicit,r=t.$index,i=Qt();dt("id",r),$(4),dt("disabled",Ke(6,12,Pr(20,dg,i.uid,n)))("value",n==null?null:n.textContent),$(8),xr(n==null?null:n.username),$(2),hs(" ",Ke(15,14,n==null||n.timestamp==null?null:n.timestamp.seconds)," "),$(5),xr(Ke(20,16,Pr(23,mg,r,i.lastDivRef))),$(2),dt("disabled",!i.isAuthenticated),$(),dt("ngClass",i.isAuthenticated?"enabled":"disabled"),$(),hs(" ",Ke(24,18,Pr(26,fg,n,i.uid))," "),$(2),dt("ngClass",i.isAuthenticated?"enabled":"disabled"),$(),xr(n.like),$(),Sr(27,i.isAuthenticated&&n.userUid===i.uid&&n.username===i.username?27:-1)}}function gg(e,t){e&1&&(D(0,"span"),at(1,"There are no items."),N())}var Wd=(()=>{var t,n,r,i,s;let o=class o{constructor(){L(this,t,void 0);L(this,n,void 0);L(this,r,void 0);L(this,i,void 0);L(this,s,void 0);j(this,t,Y(is)),j(this,n,Y(Qe)),j(this,r,Y(ae)),j(this,s,0),this.isExpanded=gt(!1),this.thoughts$=new Tr}ngOnInit(){this.thoughts$=vc([T(this,n).userInput$]).pipe(Er(([c])=>T(this,t).getThoughts(c)))}changeThoughtContent(c,u){u.trim()!=c.textContent.trim()&&T(this,t).updateThought(c.id,_c(ss({},c),{textContent:u}))}changeThoughtLikes(c){let u=c.likedBy.indexOf(this.uid,0);u>-1?(c.likedBy.splice(u,1),c.like=c.like-1):(c.likedBy.push(this.uid),c.like=c.like+1),T(this,t).updateThought(c.id,ss({},c))}expand(c){T(this,i)===void 0?(j(this,s,this.windowScrollY),this.isExpanded.update(u=>u=!0),j(this,i,this.card(c)),this.scrollToYPosition(0)):T(this,i)!=null&&c.id===T(this,i).id?(j(this,i,c),this.isExpanded()?(this.resetLastDiv(T(this,i)),this.scrollToYPosition(T(this,s)),this.isExpanded.update(l=>l=!1)):(j(this,s,window.scrollY),T(this,i).style.gridColumn="1 / span 2",T(this,i).style.gridRow="1 / span 2",this.scrollToYPosition(0),this.isExpanded.update(l=>l=!0))):T(this,i)!=null&&c.id!=T(this,i).id&&(this.isExpanded()&&j(this,s,window.scrollY),j(this,s,window.scrollY),this.resetLastDiv(T(this,i)),this.isExpanded.update(l=>l=!0),j(this,i,this.card(c)),this.scrollToYPosition(0))}scrollToYPosition(c){window.scrollTo(0,c)}removeThought(c){T(this,t).removeThought(c)}card(c){let u=this.cardContainers?.find(l=>c.id===l.nativeElement.id)?.nativeElement;return u.style.gridColumn="1 / span 2",u.style.gridRow="1 / span 2",u}resetLastDiv(c){this.lastDivRef=void 0,c.style.gridColumn="auto",c.style.gridRow="auto"}get lastDivRef(){return T(this,i)}set lastDivRef(c){j(this,i,c)}get isAuthenticated(){return T(this,r).isAuthenticated}get uid(){return T(this,r).uid}get username(){return T(this,r).username}get windowScrollY(){return window.scrollY}};t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,s=new WeakMap,o.\u0275fac=function(u){return new(u||o)},o.\u0275cmp=X({type:o,selectors:[["app-thoughts-list"]],viewQuery:function(u,l){if(u&1&&Cn(ug,5),u&2){let h;Te(h=Ee())&&(l.cardContainers=h)}},standalone:!0,features:[Z],decls:4,vars:3,consts:[[1,"card-container",3,"id"],["cardcontainer",""],[1,"card"],["type","text",3,"disabled","value","blur"],["txtArea",""],[1,"spacer"],[1,"header"],["mat-card-avatar","",1,"header-image"],["mat-button","",1,"expand",3,"click"],["color","primary"],["mat-button","",1,"like-btn",3,"disabled","click"],["color","primary",3,"ngClass"],[3,"ngClass"],["mat-button",""],["mat-button","",3,"click"],["color","accent"],["class","card-container",3,"id"]],template:function(u,l){u&1&&(Rc(0,pg,28,29,"div",16,lg,!1,gg,2,0,"span"),$e(3,"async")),u&2&&Dc(Ke(3,1,l.thoughts$))},dependencies:[_t,kc,Mc,zd,Od,Ud,Ld,Bd,qd,Fd,ie,Dr,Gd,re,Rr,kr,jd,$d,Kd,Qd],styles:["[_nghost-%COMP%]{display:inline-grid;grid-template-columns:auto;gap:3vmin;padding:6vmin;position:relative;margin-top:24vh;overflow:hidden}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]{border:1px solid #a112d53d;border-radius:4px}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]:hover{border:1px solid #333}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{z-index:0}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{position:relative;height:100%}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;border:none;outline:none;width:100%;height:100%;min-height:10vh;color:#333;letter-spacing:.025rem;line-height:18px}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-top:1px solid #e2e2e2;background-color:#f7f7f7;border-bottom-left-radius:4px;border-bottom-right-radius:4px}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#444}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   mat-icon.enabled[_ngcontent-%COMP%]{color:#22ffb5}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   mat-icon.disabled[_ngcontent-%COMP%]{color:#cfcfcf}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#444}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   span.enabled[_ngcontent-%COMP%]{color:#444}[_nghost-%COMP%]   .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]   span.disabled[_ngcontent-%COMP%]{color:#cfcfcf}@media (max-width: 728px){[_nghost-%COMP%]{display:inline-grid;grid-template-columns:auto;gap:3vmin;padding:6vmin;position:relative;margin-top:20vh;overflow:hidden}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{height:100%}}@media (min-width: 728px){[_nghost-%COMP%]{grid-template-columns:auto auto;padding:3vmin}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{height:100%}}@media (min-width: 1080px){[_nghost-%COMP%]{grid-template-columns:auto auto auto;padding:3vmin}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{height:100%}}@media (min-width: 1420px){[_nghost-%COMP%]{grid-template-columns:auto auto auto auto;padding:3vmin}[_nghost-%COMP%]   .card[_ngcontent-%COMP%]{height:100%}}",".spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-fab[_ngcontent-%COMP%]{background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5)}.mat-mdc-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-unelevated-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: #fff;--mdc-radio-disabled-unselected-icon-color: #fff;--mdc-radio-unselected-hover-icon-color: #fff;--mdc-radio-unselected-icon-color: #fff;--mdc-radio-unselected-pressed-icon-color: #fff;--mdc-radio-selected-hover-icon-color: #fff;--mdc-radio-selected-focus-icon-color: #fff;--mdc-radio-selected-icon-color: #fff;--mdc-radio-selected-pressed-icon-color: #fff;--mat-radio-ripple-color: #fff;--mat-radio-checked-ripple-color: #fff;--mat-radio-disabled-label-color: #fff}"],changeDetection:0});let e=o;return e})();var Hd=(()=>{let t=class t{fireBaseTimeStamp(){let r=new Date,i=H.fromDate(r);return new H(i.seconds,i.nanoseconds)}returnLongStringAsArray(r){return r.replace(/,\s*|\n/g," ").trim().split(/\s+/).filter(i=>i).map(i=>i.toLowerCase())}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Yd=(()=>{var t,n,r,i,s,o,a;let c=class c{constructor(){L(this,t,Y(Hd));L(this,n,Y(ae));L(this,r,Y(is));L(this,i,Y(Qe));L(this,s,gt(!1));L(this,o,gt(!1));L(this,a,gt(!1));Cc(()=>{T(this,s).update(l=>l=!!T(this,i).userInputSignal()?.length),T(this,o).update(l=>l=T(this,n).isAuthenticated),T(this,a).update(l=>l=this.isAuth()&&this.hasText())},{allowSignalWrites:!0})}addThought(){let l=T(this,t).fireBaseTimeStamp(),h=T(this,i).userInputValue,m=T(this,n).uid,p=T(this,n).username;T(this,r).addThought({textContent:h??"",username:p,timestamp:l,like:0,userUid:m,likedBy:[]}),T(this,i).userInputFormControl.patchValue("")}get condition(){return T(this,a).asReadonly()}get isAuth(){return T(this,o).asReadonly()}get hasText(){return T(this,s).asReadonly()}};t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,c.\u0275fac=function(h){return new(h||c)},c.\u0275cmp=X({type:c,selectors:[["app-create-thought"]],standalone:!0,features:[Z],decls:3,vars:1,consts:[["mat-fab","","color","primary","aria-label","icon button with a delete icon",3,"disabled","click"]],template:function(h,m){h&1&&(D(0,"button",0),It("click",function(){return m.addThought()}),D(1,"mat-icon"),at(2,"add"),N()()),h&2&&dt("disabled",!m.condition())},dependencies:[_t,ie,Gc,re,Rr],styles:["[_nghost-%COMP%]{display:block}",".spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-fab[_ngcontent-%COMP%]{background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5)}.mat-mdc-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-unelevated-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: #fff;--mdc-radio-disabled-unselected-icon-color: #fff;--mdc-radio-unselected-hover-icon-color: #fff;--mdc-radio-unselected-icon-color: #fff;--mdc-radio-unselected-pressed-icon-color: #fff;--mdc-radio-selected-hover-icon-color: #fff;--mdc-radio-selected-focus-icon-color: #fff;--mdc-radio-selected-icon-color: #fff;--mdc-radio-selected-pressed-icon-color: #fff;--mat-radio-ripple-color: #fff;--mat-radio-checked-ripple-color: #fff;--mat-radio-disabled-label-color: #fff}"],changeDetection:0});let e=c;return e})();var Vw=(()=>{let t=class t{constructor(){this.title="social-thoughts",this.seletor=Y(Or).seletor}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=X({type:t,selectors:[["app-application-wrapper"]],standalone:!0,features:[Z],decls:4,vars:0,template:function(i,s){i&1&&wt(0,"app-toolbar")(1,"app-search-bar")(2,"app-thoughts-list")(3,"app-create-thought")},dependencies:[_t,pu,yu,Wd,Yd],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;background-color:#fafafa;overflow:auto;position:relative;top:0}[_nghost-%COMP%]   app-create-thought[_ngcontent-%COMP%]{position:fixed;bottom:5vmin;right:5vmin}",".spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-fab[_ngcontent-%COMP%]{background:linear-gradient(to right bottom,#eb054e,#db0a84,#a212d5)}.mat-mdc-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-unelevated-button[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{margin-right:0}.mat-mdc-card-content[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-radio-button.mat-primary[_ngcontent-%COMP%]{--mdc-radio-disabled-selected-icon-color: #fff;--mdc-radio-disabled-unselected-icon-color: #fff;--mdc-radio-unselected-hover-icon-color: #fff;--mdc-radio-unselected-icon-color: #fff;--mdc-radio-unselected-pressed-icon-color: #fff;--mdc-radio-selected-hover-icon-color: #fff;--mdc-radio-selected-focus-icon-color: #fff;--mdc-radio-selected-icon-color: #fff;--mdc-radio-selected-pressed-icon-color: #fff;--mat-radio-ripple-color: #fff;--mat-radio-checked-ripple-color: #fff;--mat-radio-disabled-label-color: #fff}"]});let e=t;return e})();export{pv as a,gv as b,Qd as c,Vw as d};
